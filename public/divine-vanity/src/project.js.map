{"version":3,"sources":["project.js"],"names":["require","e","t","n","r","s","o","u","a","i","f","Error","code","l","exports","call","length","AssetMng","module","cc","_RFpush","Class","extends","Component","properties","init","cb","this","wishesDB","url","raw","loader","loadJson","error","data","id","bind","getWishInfo","_RFpop","AudioMng","bgm","default","AudioClip","ritual","baby","wishSFX","statics","instance","playBGM","audioEngine","playMusic","playRitual","playEffect","playBaby","playWishSFX","wishType","onLoad","BattlePanel","PowerBar","EffectMng","Credits","people","type","Label","power","skillList","Node","creditPanel","skills","allUnlocked","node","active","start","instantiate","unlockBtn","state","self","eventManager","addListener","event","EventListener","KEYBOARD","onKeyPressed","keyCode","KEY","b","useSkill","skillID","costValue","emit","Resources","spendPower","chackBtnState","play","resources","len","skill","button","interactable","cost","curPower","firstPosX","current","x","unlocked","push","showCredit","skillArr","getChildren","skillInfo","getComponent","updateSkill","ButtonScaler","pressedScale","transDuration","onTouchDown","stopAllActions","runAction","scaleDownAction","onTouchUp","scaleUpAction","initScale","scale","Button","scaleTo","on","Camera","editor","executeInEditMode","playOnFocus","previewOnFocus","notify","enabled","tooltip","editorOnly","world","onFocusInEditor","onLostFocusInEditor","onDisable","position","Vec2","ZERO","ONE","rotation","lateUpdate","dt","screenCenter","Canvas","sub","scaleX","offset","subSelf","mulSelf","add","rotate","RAD","scrollView","ScrollView","startScroll","onEnable","isInit","scheduleOnce","scrollDown","scrollToBottom","hide","unschedule","update","scrollToTop","fxRain","ParticleSystem","fxMeta","fxFire","Animation","fxSun","fxWheat","resetSystem","FXRitual","particle","anim","sign","signID","playAnim","camera","find","lookAt","target","action","sequence","delayTime","playParticle","show","FXSign","sprite","Sprite","sfSigns","SpriteFrame","spriteFrame","opacity","_sgNode","fadeIn","scaleDown","callback","callFunc","wait","fadeOut","FXWonder","idx","y","random0To1","GameOverPanel","society","eyesAnimCtrl","hasDown","stopPropagation","goToMainPanelClick","director","loadScene","God","battlePanel","wonderPrefab","Prefab","wonderLayer","skillFired","tribute","value","addPower","detail","showWonder","wonder","addChild","randomMinus1To1","Group","randomArrayItems","arr","num","temp","index","results","arrIndex","Math","floor","random","splice","unuse","reuse","js","mixin","prototype","States","DEFAULT","wish","poses","praying","prayRitual","countdown","learning","addMember","newbie","canLearn","ritualNeed","isLearning","isPraying","split","learningGroup","need","ceil","leftCount","person","toState","_this","PRAYING","rituals","forEach","behavior","currentState","currentWish","currentPose","pose","pray","poseDuration","LEARNING","UnusedPoses","poseCount","sort","lastX","moveTo","WORSHIPING","lostCount","array","tributePerP","lostCoef","LOST","lost","punish","rejointDefault","_this2","checked","poseId","prevPose","indexOf","prayCoef","behaviors","../../ykl/global","HumanBehavior","firstRight","firstWrong","visible","displayName","stop","WishType","wishIcon","sfWishIcons","wishIconAnim","window","oldState","_updateState","moveSpeed","idleMoveSpeed","idleChangeDirectionTimeRange","v2","canvas","_idleTime","_idleChangeDirectionTime","hideWish","DOUBTING","showWish","playLine","CONFIRMING","getChildByName","str","string","easing","easeOut","removeFromParent","onChecked","nar","handleDefaultState","range","direction","speed","width","currentClip","name","HumanManager","checkedHumans","onHumanIconClicked","break","item","setTimeout","updateHumanState","updateHumanPosition","human","minDistance","dif","first","close","left","right","j","second","abs","addCheckedHuman","checkedHuman","LookAt","requireComponent","_getWorldPosition","convertToWorldSpaceAR","scene","getRunningScene","convertToNodeSpaceAR","_setWorldPosition","pos","parent","src","dest","convertToNodeSpace","addSelf","delta","magSqr","maxDelta","dir","divSelf","sqrt","MainPanel","Society","Narrative","animCtrl","eyesNode","startGameBtn","battlePanelAnim","narrative","hasMoveScene","getScene","hideMainPanelAnimEnd","resume","runMoveScene","getAnimationState","wrapMode","WrapMode","Reverse","label","durationPerLine","textContents","multiline","fadeDuration","currentTextId","actFadeOut","actFadeIn","switchText","seq","hideLine","content","changePower","newPowerValue","newPowerBarValue","curValue","progress","curProgressValue","updateValue","barValue","addorLower","parseFloat","toFixed","animaBar","Skills",1,2,3,4,5,6,7,8,9,"INIT_POWER","MIN_POWER","MAX_POWER","Integer","gameOver","SkillMng","Skill","sfIcons","cooldown","userSkill","onButtonCooldown","createRitual","count","level","Wish","wishTypeList","Enum","getList","Wishes","PopulationLevel","Levels","wishes","host","fxRitual","assetMng","prayDelay","learnDelay","population","pause","_pause","ritualCount","lastRitualID","firstWishPop","god","defaultGroup","runningGroups","prayTimeout","learnTimeout","wishInfo","parseInt","divineConsume","wishConsume","levelBonus","attraction","wishCheck","group","wishID","pickedPose","max","poseID","Poses","ritualLearnt","newbies","round","generate","lastLevel","updatePopulation","newSkillsAvailable","startLearning","learn","delay","succeed","Object","keys","pool","putInPool","knownWishes","hasObject","getFromPool","../Wish","TouchStart","mask","TOUCH_ONE_BY_ONE","onTouchBegan","touch","onTouchEnded","TriggerAnimEvent","startBtnAnim","eyesAnimEnd","generator","w","winSize","zIndex","height","global","Rain","Fire","Meat","Sun","Wheet"],"mappings":"AAAAA,QAAQ,QAAUC,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATR,UAAqBA,OAAQ,KAAIO,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGG,EAAE,MAAOA,GAAEH,GAAE,EAAI,IAAII,GAAE,GAAIC,OAAM,uBAAuBL,EAAE,IAAK,MAAMI,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEV,EAAEG,IAAIQ,WAAYZ,GAAEI,GAAG,GAAGS,KAAKF,EAAEC,QAAQ,SAASb,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIY,EAAEA,EAAEC,QAAQb,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGQ,QAAkD,IAAI,GAA1CL,GAAkB,kBAATT,UAAqBA,QAAgBM,EAAE,EAAEA,EAAEF,EAAEY,OAAOV,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKY,UAAY,SAASjB,EAAQkB,EAAOJ,GACxe,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,YAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdC,cAGAC,KAAM,SAAcC,GAChBC,KAAKC,WACL,IAAIC,GAAMV,GAAGU,IAAIC,IAAI,mBACrBX,IAAGY,OAAOC,SAASH,EAAK,SAAWI,EAAOC,GACtC,IAAK,GAAIzB,GAAI,EAAGA,EAAIyB,EAAKlB,QACF,KAAfkB,EAAKzB,GAAG0B,KADmB1B,EAE/BkB,KAAKC,SAASM,EAAKzB,GAAG0B,IAAMD,EAAKzB,EAEjCiB,IACAA,KAELU,KAAKT,QAGZU,YAAa,SAAqBF,GAC9B,MAAOR,MAAKC,SAASO,MAS7BhB,GAAGmB,cACGC,UAAY,SAASvC,EAAQkB,EAAOJ,GAC1C,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,WAG9C,IAAIqB,GAAWpB,GAAGE,OACdC,UAAWH,GAAGI,UAEdC,YACIgB,KACIC,UAAW,KACXZ,IAAKV,GAAGuB,WAEZC,QACIF,UAAW,KACXZ,IAAKV,GAAGuB,WAEZE,MACIH,UAAW,KACXZ,IAAKV,GAAGuB,WAEZG,SACIJ,aACAZ,IAAKV,GAAGuB,YAIhBI,SACIC,SAAU,MAGdC,QAAS,WACL7B,GAAG8B,YAAYC,UAAUvB,KAAKa,KAAK,IAGvCW,WAAY,WACRhC,GAAG8B,YAAYG,WAAWzB,KAAKgB,QAAQ,IAG3CU,SAAU,WACNlC,GAAG8B,YAAYG,WAAWzB,KAAKiB,MAAM,IAGzCU,YAAa,SAAqBC,GAC1BA,EAAW5B,KAAKkB,QAAQ7B,QACxBG,GAAG8B,YAAYG,WAAWzB,KAAKkB,QAAQU,IAAW,IAI1DC,OAAQ,WACJjB,EAASQ,SAAWpB,OAS5BR,IAAGmB,cACGmB,aAAe,SAASzD,EAAQkB,EAAOJ,GAC7C,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,cAI9C,IAAIwC,GAAW1D,EAAQ,YACnB2D,EAAY3D,EAAQ,aACpBuC,EAAWvC,EAAQ,YACnB4D,EAAU5D,EAAQ,WAElByD,EAActC,GAAGE,OACjBC,UAAWH,GAAGI,UAEdC,YACIqC,QACIpB,UAAW,KACXqB,KAAM3C,GAAG4C,OAEbC,OACIvB,UAAW,KACXqB,KAAMJ,GAEVO,WACIxB,UAAW,KACXqB,KAAM3C,GAAG+C,MAEbC,YAAaP,GAGjBd,SACIC,SAAU,MAGdS,OAAQ,WACJC,EAAYV,SAAWpB,KACvBA,KAAKyC,UACLzC,KAAK0C,aAAc,EACnB1C,KAAKwC,YAAYG,KAAKC,QAAS,GAGnCC,MAAO,WACH7C,KAAK8C,cACL9C,KAAK+C,UAAU,GAEf/C,KAAKgD,MAAQ,CACb,IAAIC,GAAOjD,IACXR,IAAG0D,aAAaC,aACZC,MAAO5D,GAAG6D,cAAcC,SACxBC,aAAc,SAAsBC,EAASJ,GACzC,OAAQI,GACJ,IAAKhE,IAAGiE,IAAIC,EACRT,EAAKD,QACDC,EAAKD,MAAQ,IACbC,EAAKD,MAAQ,GAEjBC,EAAKF,UAAUE,EAAKD,UAIjChD,KAAK2C,OAGZgB,SAAU,SAAkBC,EAASC,GACjC7D,KAAK2C,KAAKmB,KAAK,eAAiBF,QAAWA,GAC3C,IAAIG,GAAY1F,EAAQ,YACxB0F,GAAU3C,SAAS4C,WAAWH,GAC9B7D,KAAKiE,cAAcF,GACnB/B,EAAUZ,SAAS8C,KAAKN,GACxBhD,EAASQ,SAASO,YAAYiC,IAIlCK,cAAe,SAAuBE,GAClC,IAAK,GAAIrF,GAAI,EAAGsF,EAAMpE,KAAKyC,OAAOpD,OAAY+E,EAAJtF,IAAWA,EAAG,CACpD,GAAIuF,GAAQrE,KAAKyC,OAAO3D,EACxBuF,GAAMC,OAAOC,aAAeF,EAAMG,MAAQL,EAAU/C,SAASqD,WAIrE1B,UAAW,SAAmBC,GAC1B,IAAIhD,KAAK0C,YAAT,CAGIM,EAAQ,IACRhD,KAAK0C,aAAc,EAEvB,IAEI5D,GACAsF,EACAC,EAJAK,EAAY,IAAc,IAAR1B,EAClB2B,EAAU,CAId,KAAK7F,EAAI,EAAGsF,EAAMpE,KAAKyC,OAAOpD,OAAY+E,EAAJtF,IAElCuF,EAAQrE,KAAKyC,OAAO3D,GAChBuF,EAAM1B,KAAKC,UAH8B9D,EAIzC6F,EAAU7F,EACVuF,EAAM1B,KAAKiC,EAAIF,EAAY,IAAM5F,CAKzC,IAAI+F,KACJ,KAAK/F,EAAI6F,EAAU,EAAQ3B,GAALlE,GAAcA,EAAIkB,KAAKyC,OAAOpD,OAAQP,IACxDuF,EAAQrE,KAAKyC,OAAO3D,GACpBuF,EAAM1B,KAAKiC,EAAIF,EAAY,IAAM5F,EACjCuF,EAAM1B,KAAKC,QAAS,EACpBiC,EAASC,KAAKhG,EAElB,OAAO+F,KAGXE,WAAY,WACR/E,KAAKwC,YAAYG,KAAKC,QAAS,GAInCE,YAAa,WAGT,IAAK,GADDkC,IADY3G,EAAQ,aACT2B,KAAKsC,UAAU2C,eACrBnG,EAAI,EAAGsF,EAAMY,EAAS3F,OAAY+E,EAAJtF,IAAWA,EAAG,CACjD,GAAIoG,IAAc1E,GAAI1B,EAAG0F,KAAM,IAAM1F,EAAI,IACrCuF,EAAQW,EAASlG,GAAGqG,aAAa,QACrCd,GAAMe,YAAYF,EAAWlF,KAAK2D,SAAU3D,MAC5CA,KAAKyC,OAAOqC,KAAKT,MAK7B7E,IAAGmB,WACAC,SAAW,WAAWqB,QAAU,UAAUD,UAAY,YAAYD,SAAW,WAAWgC,UAAY,cAAcsB,cAAgB,SAAShH,EAAQkB,EAAOJ,GAC7J,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,gBAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdC,YACIyF,aAAc,EACdC,cAAe,GAInB1D,OAAQ,WAMJ,QAAS2D,GAAYpC,GACjBpD,KAAKyF,iBACLzF,KAAK0F,UAAUzC,EAAK0C,iBAExB,QAASC,GAAUxC,GACfpD,KAAKyF,iBACLzF,KAAK0F,UAAUzC,EAAK4C,eAXxB,GAAI5C,GAAOjD,IACXiD,GAAK6C,UAAY9F,KAAK2C,KAAKoD,MAC3B9C,EAAKqB,OAASrB,EAAKkC,aAAa3F,GAAGwG,QACnC/C,EAAK0C,gBAAkBnG,GAAGyG,QAAQhD,EAAKsC,cAAetC,EAAKqC,cAC3DrC,EAAK4C,cAAgBrG,GAAGyG,QAAQhD,EAAKsC,cAAetC,EAAK6C,WASzD9F,KAAK2C,KAAKuD,GAAG,aAAcV,EAAaxF,KAAK2C,MAC7C3C,KAAK2C,KAAKuD,GAAG,WAAYN,EAAW5F,KAAK2C,MACzC3C,KAAK2C,KAAKuD,GAAG,cAAeN,EAAW5F,KAAK2C,SAIpDnD,GAAGmB,cACGwF,QAAU,SAAS9H,EAAQkB,EAAOJ,GACxC,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,UAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdwG,QACIC,mBAAmB,EACnBC,aAAa,GAGjBzG,YACI0G,gBACIzF,WAAW,EACX0F,OAAQ,WACJxG,KAAKyG,QAAUzG,KAAKuG,gBAExBG,QAAS,yDACTC,YAAY,GAGhBC,OACI9F,UAAW,KACXqB,KAAM3C,GAAG+C,KACTmE,QAAS,uEAMjBG,gBAAiC,WACzB7G,KAAKuG,iBACLvG,KAAKyG,SAAU,IAIvBK,oBAAqC,WACjC9G,KAAKyG,SAAU,GAiBnBM,UAAW,WAEP/G,KAAK4G,MAAMI,SAAWxH,GAAGyH,KAAKC,KAC9BlH,KAAK4G,MAAMb,MAAQvG,GAAGyH,KAAKE,IAC3BnH,KAAK4G,MAAMQ,SAAW,GAO1BC,WAAY,SAAoBC,GAC5B,GAAI3E,GAAO3C,KAAK2C,KACZiE,EAAQ5G,KAAK4G,KACjB,IAAKA,EAAL,CAGA,GAAIW,EACA/H,IAAGgI,OAAOpG,WACVmG,EAAe/H,GAAGgI,OAAOpG,SAASuB,KAAKqE,SAI3C,IAAIA,GAAWO,EAAaE,IAAI9E,EAAKqE,UAGjCjB,EAAQpD,EAAK+E,OACbC,EAASX,EAASY,QAAQL,EAC9BI,GAAOE,QAAQ9B,GACfiB,EAAWO,EAAaO,IAAIH,EAG5B,IAAIP,IAAYzE,EAAKyE,QACJ,KAAbA,IACAJ,EAAWO,EAAaO,IAAIH,EAAOI,QAAQX,EAAW5H,GAAGwI,OAG7DpB,EAAMI,SAAWA,EACjBJ,EAAMQ,SAAWA,EACjBR,EAAMb,MAAQA,MAItBvG,GAAGmB,cACGsB,SAAW,SAAS5D,EAAQkB,EAAOJ,GACzC,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,WAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdC,YACIoI,WAAYzI,GAAG0I,YAInBC,YAAa,aAEbC,SAAU,WACNpI,KAAKqI,QAAS,EACdrI,KAAKsI,aAAatI,KAAKuI,WAAY,IAGvCA,WAAY,WACRvI,KAAKiI,WAAWO,eAAe,IAAI,IAGvCC,KAAM,WACFzI,KAAK2C,KAAKC,QAAS,EACnB5C,KAAK0I,WAAW1I,KAAKuI,YACrBvI,KAAKqI,QAAS,GAIlBM,OAAQ,SAAgBrB,GAChBtH,KAAKqI,SACLrI,KAAKiI,WAAWW,cAChB5I,KAAKqI,QAAS,MAK1B7I,GAAGmB,cACGqB,WAAa,SAAS3D,EAAQkB,EAAOJ,GAC3C,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,YAG9C,IAAIyC,GAAYxC,GAAGE,OACfC,UAAWH,GAAGI,UAEdC,YACIgJ,QACI/H,UAAW,KACXqB,KAAM3C,GAAGsJ,gBAEbC,QACIjI,UAAW,KACXqB,KAAM3C,GAAGsJ,gBAEbE,QACIlI,UAAW,KACXqB,KAAM3C,GAAGyJ,WAEbC,OACIpI,UAAW,KACXqB,KAAM3C,GAAGyJ,WAEbE,SACIrI,UAAW,KACXqB,KAAM3C,GAAGyJ,YAIjB9H,SACIC,SAAU,MAGdS,OAAQ,WACJG,EAAUZ,SAAWpB,MAGzBkE,KAAM,SAAcN,GAChB,OAAQA,GACJ,IAAK,GAED5D,KAAK6I,OAAOpC,SAAU,EACtBzG,KAAK6I,OAAOO,aACZ,MACJ,KAAK,GAEDpJ,KAAKgJ,OAAO9E,KAAK,eACjB,MACJ,KAAK,GAEDlE,KAAK+I,OAAOtC,SAAU,EACtBzG,KAAK+I,OAAOK,aACZ,MACJ,KAAK,GAEDpJ,KAAKkJ,MAAMhF,KAAK,SAChB,MACJ,KAAK,GAEDlE,KAAKgJ,OAAO9E,KAAK,cAK7ByE,OAAQ,SAAgBrB,MAG5B9H,IAAGmB,cACG0I,UAAY,SAAShL,EAAQkB,EAAOJ,GAC1C,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,YAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdC,YACIyJ,SAAU9J,GAAGsJ,eACbS,KAAM/J,GAAGyJ,UACTO,KAAMhK,GAAG+C,MAIbV,OAAQ,WACJ7B,KAAKwJ,KAAOxJ,KAAKwJ,KAAKrE,aAAa,UACnCnF,KAAKyJ,OAAS,IAGlBC,SAAU,SAAkBD,GACxBzJ,KAAKyJ,OAASA,EACdzJ,KAAKuJ,KAAKrF,KAAK,cAEf,IAAIyF,GAASnK,GAAGoK,KAAK,UACjBC,EAASrK,GAAGoK,KAAK,UAAUzE,aAAa,SAE5C0E,GAAOC,OAAS9J,KAAK2C,IAErB,IAAIoH,GAASvK,GAAGwK,UAAUxK,GAAGyG,QAAQ,GAAK,IAAK,KAAMzG,GAAGyK,UAAU,GAAIzK,GAAGyG,QAAQ,GAAK,EAAG,IACzF0D,GAAOjE,UAAUqE,IAGrBG,aAAc,WACVlK,KAAKsJ,SAASF,cACdpJ,KAAKwJ,KAAKW,KAAKnK,KAAKyJ,WAS5BjK,GAAGmB,cACGyJ,QAAU,SAAS/L,EAAQkB,EAAOJ,GACxC,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,UAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdC,YACIwK,OAAQ7K,GAAG8K,OACXC,SAAU/K,GAAGgL,cAGjB3I,OAAQ,WACJ7B,KAAKqK,OAAO5D,SAAU,GAG1B0D,KAAM,SAAcV,GAChBzJ,KAAKqK,OAAO5D,SAAU,EACtBzG,KAAKqK,OAAOI,YAAczK,KAAKuK,QAAQd,GACvCzJ,KAAK2C,KAAKoD,MAAQ,EAClB/F,KAAK2C,KAAK+H,QAAU,EACpB1K,KAAKqK,OAAOM,QAAQD,QAAU,GAC9B,IAAIE,GAASpL,GAAGoL,OAAO,IACnBC,EAAYrL,GAAGyG,QAAQ,GAAK,GAC5B6E,EAAWtL,GAAGuL,SAAS/K,KAAKgL,KAAMhL,KACtCA,MAAK2C,KAAK+C,UAAUlG,GAAGwK,SAASY,EAAQC,EAAWC,KAGvDE,KAAM,WACFhL,KAAKsI,aAAa,WACd,GAAI2C,GAAUzL,GAAGyL,QAAQ,GACzBjL,MAAK2C,KAAK+C,UAAUuF,IACrB,QASXzL,GAAGmB,cACGuK,UAAY,SAAS7M,EAAQkB,EAAOJ,GAC1C,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,YAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdC,YACIyJ,SAAU9J,GAAGsJ,eACbS,KAAM/J,GAAGyJ,WAGbS,SAAU,SAAkByB,GACxB,OAAQA,GACJ,IAAK,GACDnL,KAAKuJ,KAAKrF,KAAK,OACflE,KAAK2C,KAAKyI,GAAuB,GAAlB5L,GAAG6L,aAClBrL,KAAK2C,KAAKoD,OAA2B,GAAlBvG,GAAG6L,aAAqB,CAC3C,MACJ,KAAK,GACDrL,KAAKuJ,KAAKrF,KAAK,SACflE,KAAK2C,KAAKyI,GAAuB,IAAlB5L,GAAG6L,YAClB,MACJ,KAAK,GACDrL,KAAKuJ,KAAKrF,KAAK,YACflE,KAAK2C,KAAKyI,GAAuB,GAAlB5L,GAAG6L,aAClBrL,KAAK2C,KAAKoD,OAA2B,GAAlBvG,GAAG6L,aAAqB,CAC3C,MACJ,KAAK,GACDrL,KAAKuJ,KAAKrF,KAAK,aACflE,KAAK2C,KAAKyI,GAAuB,GAAlB5L,GAAG6L,YAClB,MACJ,KAAK,GACDrL,KAAKuJ,KAAKrF,KAAK,OAIvBlE,KAAKsJ,SAASF,iBAStB5J,GAAGmB,cACG2K,eAAiB,SAASjN,EAAQkB,EAAOJ,GAC/C,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,iBAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdC,YACI0L,SACIzK,UAAW,KACXqB,KAAM3C,GAAG+C,MAEbiJ,cACI1K,UAAW,KACXqB,KAAM3C,GAAGyJ,YAIjBpH,OAAQ,WACJ7B,KAAKyL,SAAU,EACfzL,KAAK2C,KAAKC,QAAS,EACnB5C,KAAK2C,KAAKuD,GAAG,aAAc,SAAU9C,GACjCA,EAAMsI,qBAIdtD,SAAU,WACNpI,KAAKwL,aAAatH,KAAK,aAG3ByH,mBAAoB,WACZ3L,KAAKyL,UAGTzL,KAAKyL,SAAU,EACfjM,GAAGoM,SAASC,UAAU,YAI9BrM,GAAGmB,cACGmL,KAAO,SAASzN,EAAQkB,EAAOJ,GACrC,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,MAG9C,IACIwE,IADc1F,EAAQ,eACVA,EAAQ,aAExBmB,IAAGE,OACCC,UAAWH,GAAGI,UAEdC,YACIkM,aACIjL,UAAW,KACXqB,KAAM3C,GAAG+C,MAGb4B,WACIrD,UAAW,KACXqB,KAAM4B,GAGViI,cACIlL,UAAW,KACXqB,KAAM3C,GAAGyM,QAGbC,YAAa1M,GAAG+C,MAIpBV,OAAQ,WACJ7B,KAAKyC,OAASzC,KAAK2C,KAAKwC,aAAa,UACrCnF,KAAKuL,QAAUvL,KAAK2C,KAAKwC,aAAa,WAEtCnF,KAAK+L,YAAY7F,GAAG,cAAelG,KAAKmM,WAAYnM,OAGxDoM,QAAS,SAAiBC,GACtBrM,KAAKmE,UAAUmI,SAASD,IAG5BF,WAAY,SAAoB5L,GAC5BP,KAAKuL,QAAQY,WAAW5L,EAAKgM,OAAO3I,UAGxC4I,WAAY,SAAoBhM,GAC5B,GAAIiM,GAASjN,GAAGsD,YAAY9C,KAAKgM,aACjChM,MAAKkM,YAAYQ,SAASD,GAC1BA,EAAO7H,EAA2B,IAAvBpF,GAAGmN,kBACdF,EAAOtH,aAAa,YAAYuE,SAASlJ,MAIjDhB,GAAGmB,WACAmB,YAAc,cAAciC,UAAY,cAAc6I,OAAS,SAASvO,EAAQkB,EAAOJ,GAC1F,YAMA,SAAS0N,GAAiBC,EAAKC,GAC3B,GAAIC,KACJ,KAAK,GAAIC,KAASH,GACdE,EAAKlI,KAAKgI,EAAIG,GAIlB,KAAK,GADDC,MACKpO,EAAI,EAAOiO,EAAJjO,GACRkO,EAAK3N,OAAS,EADGP,IAAK,CAEtB,GAAIqO,GAAWC,KAAKC,MAAMD,KAAKE,SAAWN,EAAK3N,OAC/C6N,GAAQpO,GAAKkO,EAAKG,GAClBH,EAAKO,OAAOJ,EAAU,GAK9B,MAAOD,GArBX1N,GAAGC,QAAQF,EAAQ,0BAA2B,SAG9ClB,EAAQ,mBAqBR,IAAIuO,GAAQ,SAAerB,GACvBvL,KAAKkC,UACLlC,KAAKwN,QACLxN,KAAKyN,MAAMlC,GAGf/L,IAAGkO,GAAGC,MAAMf,EAAMgB,WACdJ,MAAO,WACHxN,KAAKuL,QAAU,KACfvL,KAAKkC,OAAO7C,OAAS,EACrBW,KAAKgD,MAAQ6K,OAAOC,QACpB9N,KAAK+N,KAAO,KACZ/N,KAAKgO,MAAQ,KACbhO,KAAKiO,SAAU,EACfjO,KAAKkO,WAAa,KAClBlO,KAAKmO,UAAY,EACjBnO,KAAK4C,QAAS,EACd5C,KAAKoO,UAAW,GAGpBX,MAAO,SAAelC,GAClBvL,KAAKuL,QAAUA,EACfvL,KAAK4C,QAAS,GAGlByL,UAAW,SAAmBC,GACtBtO,KAAKgD,QAAU6K,OAAOC,SACtB9N,KAAKkC,OAAO4C,KAAKwJ,IAIzBC,SAAU,SAAkBR,GACxB,MAAO/N,MAAKgD,QAAU6K,OAAOC,SAAW9N,KAAKkC,OAAO7C,QAAU0O,EAAKS,YAGvEC,WAAY,WACR,MAAOzO,MAAKoO,YAAa,GAG7BM,UAAW,WACP,MAAO1O,MAAKiO,WAAY,GAG5BU,MAAO,SAAeZ,EAAMa,GACxB,GAAI5O,KAAKuO,SAASR,GAAO,CACrB,GAAIc,GAAOd,EAAKS,WAAapB,KAAK0B,KAAqB,EAAhB1B,KAAKE,UACxCyB,EAAY/O,KAAKkC,OAAO7C,OAASwP,CACzB,GAAZE,IAAkBA,EAAY,EAC9B,KAAK,GAAIjQ,GAAIkB,KAAKkC,OAAO7C,OAAS,EAAGP,GAAKiQ,IAAajQ,EAAG,CACtD,GAAIkQ,GAAShP,KAAKkC,OAAOqL,OAAOzO,EAAG,EACnC8P,GAAcP,UAAUW,EAAO,IAEnC,OAAO,EAEX,OAAO,GAGXC,QAAS,SAAiBjM,EAAOuJ,GAC7B,GAAI2C,GAAQlP,IAEZ,IAAIgD,IAAUhD,KAAKgD,MAEf,OADAhD,KAAKgD,MAAQA,EACLA,GACJ,IAAK6K,QAAOsB,QACR,GAAInO,GAAShB,KAAKuL,QAAQ6D,QAAQpP,KAAK+N,KAAKvN,GAC5CR,MAAKkC,OAAOmN,QAAQ,SAAUL,EAAQ/B,GAClC,GAAIqC,GAAWN,EAAO7J,aAAa,gBACnCmK,GAASC,aAAe1B,OAAOsB,QAC/BG,EAASE,YAAcN,EAAMnB,KAC7BuB,EAASG,YAAczO,EAAO0O,KAC9BJ,EAASK,KAAKxK,aAAa3F,GAAG8K,QAAQ7D,SAAU,EAChD6I,EAASK,KAAKzL,KAAK,UAEvBlE,KAAKmO,UAAYnO,KAAK+N,KAAK6B,aAC3B5P,KAAKkO,WAAalN,EAAO0O,KACzB1P,KAAKiO,SAAU,CACf,MACJ,KAAKJ,QAAOgC,SAER7P,KAAKgO,MAAQnB,EAAiBiD,YAAa9P,KAAK+N,KAAKgC,WACrD/P,KAAKkC,OAAOmN,QAAQ,SAAUL,EAAQ/B,GAClC,GAAIqC,GAAWN,EAAO7J,aAAa,gBACnCmK,GAASC,aAAe1B,OAAOgC,SAC/BP,EAASE,YAAcN,EAAMnB,KAC7BuB,EAASG,YAAcP,EAAMlB,MAAMf,EAAQiC,EAAMlB,MAAM3O,SAS3D,KAAK,GALD6C,GAASlC,KAAKkC,OAAO8N,KAAK,SAAUnR,EAAG6E,GACvC,MAAO7E,GAAE+F,EAAIlB,EAAEkB,EAAI,EAAI,KAGvBqL,EAAQ,KACHnR,EAAI,EAAGI,EAAIgD,EAAO7C,OAAYH,EAAJJ,EAAOA,IACtC,GAAU,IAANA,EAAJ,CAKA,GAAI8F,GAAI1C,EAAOpD,GAAG8F,CAEF,IAAZA,EAAIqL,GACJ/N,EAAOpD,GAAG4G,UAAUlG,GAAG0Q,OAAO,GAAKD,EAAQ,GAAI/N,EAAOpD,GAAGsM,IACzD6E,GAAS,IAETA,EAAQrL,MAVRqL,GAAQ/N,EAAOpD,GAAG8F,CAc1B5E,MAAKmO,UAAYnO,KAAK+N,KAAK6B,aAC3B5P,KAAKoO,UAAW,CAChB,MACJ,KAAKP,QAAOsC,WAERnQ,KAAKgO,QAAUhO,KAAKgO,MAAM3O,OAAS,EACnC,IAAI0O,GAAO/N,KAAK+N,KACZ7L,EAASlC,KAAKkC,OACdqJ,EAAUvL,KAAKuL,QACf0C,EAAUjO,KAAKiO,QACfhL,EAAOjD,IACXA,MAAKuL,QAAQjD,aAAa,WACtB,GAAI8H,GAAY,EACZC,IACJnO,GAAOmN,QAAQ,SAAUL,EAAQ/B,GAC7B,GAAIqC,GAAWN,EAAO7J,aAAa,gBAEnC,IAAI8I,GAAW1B,IAAW+C,EAASG,YAC/BH,EAASlD,QAAU2B,EAAKuC,YACxBhB,EAASC,aAAe1B,OAAOsC,WAC/BE,EAAMvL,KAAKkK,OAIP,IAAI5B,KAAKE,SAAW/B,EAAQgF,SAAU,CAClC,GAAIjB,GAAWN,EAAO7J,aAAa,gBACnCmK,GAASC,aAAe1B,OAAO2C,KAC/BJ,QAEAd,GAASC,aAAe1B,OAAOC,QAC/BuC,EAAMvL,KAAKkK,KAI3B/L,EAAKf,OAASmO,EACVD,EAAY,GACZ7E,EAAQkF,KAAKL,IAElB,GACHpQ,KAAK+N,KAAO,KAER/N,KAAKmO,UADLnO,KAAKyO,WACY,IAEA,IAOrCiC,OAAQ,WACJ,GAAIxO,GAASlC,KAAKkC,OACdqJ,EAAUvL,KAAKuL,QACftI,EAAOjD,IACXA,MAAKuL,QAAQjD,aAAa,WACtB,GAAI8H,GAAY,EACZC,IACJnO,GAAOmN,QAAQ,SAAUL,EAAQ/B,GAC7B,GAAIG,KAAKE,SAAW/B,EAAQgF,SAAU,CAClCH,GACA,IAAId,GAAWN,EAAO7J,aAAa,gBACnCmK,GAASC,aAAe1B,OAAO2C,SAE/BH,GAAMvL,KAAKkK,GACXA,EAAO7J,aAAa,iBAAiBoK,aAAe1B,OAAOC,UAGnE7K,EAAKf,OAASmO,EACVD,EAAY,GACZ7E,EAAQkF,KAAKL,GAEjB7E,EAAQoF,eAAe1N,IACxB,GACHjD,KAAK4C,QAAS,EACd5C,KAAKgD,MAAQ6K,OAAOC,SAGxBnF,OAAQ,SAAgBrB,GACpB,GAAIsJ,GAAS5Q,IAEb,IAAIA,KAAKmO,UAAY,EACjBnO,KAAKmO,WAAa7G,MAGlB,QADAtH,KAAKmO,UAAY,EACTnO,KAAKgD,OACT,IAAK6K,QAAOgC,SAER7P,KAAKkC,OAAOmN,QAAQ,SAAUL,GAC1B,GAAIM,GAAWN,EAAO7J,aAAa,gBACnC,KAAKmK,EAASuB,QAAS,CACnB,GACIC,GADAC,EAAWH,EAAO5C,MAAMgD,QAAQ1B,EAASG,YAE7C,GACIqB,GAAS1D,KAAKC,MAAMD,KAAKE,SAAWsD,EAAO5C,MAAM3O,cAC5CyR,IAAWC,GAAYH,EAAO5C,MAAM3O,OAAS,EACtDiQ,GAASG,YAAcmB,EAAO5C,MAAM8C,MAG5C9Q,KAAKmO,UAAYnO,KAAK+N,KAAK6B,YAC3B,MACJ,KAAK/B,QAAOsB,QACR,GAAIjN,GAASlC,KAAKkC,OACdqJ,EAAUvL,KAAKuL,QACftI,EAAOjD,IACXA,MAAKuL,QAAQjD,aAAa,WACtB,GAAI8H,GAAY,EACZC,IACJnO,GAAOmN,QAAQ,SAAUL,EAAQ/B,GAC7B,GAAIG,KAAKE,SAAW/B,EAAQ0F,SAAU,CAClCb,GACA,IAAId,GAAWN,EAAO7J,aAAa,gBACnCmK,GAASC,aAAe1B,OAAO2C,SAE/BH,GAAMvL,KAAKkK,GACXA,EAAO7J,aAAa,iBAAiBoK,aAAe1B,OAAOC,UAGnE7K,EAAKf,OAASmO,EACVD,EAAY,GACZ7E,EAAQkF,KAAKL,GAEjB7E,EAAQoF,eAAe1N,IACxB,GACHjD,KAAK4C,QAAS,EACd5C,KAAKgD,MAAQ6K,OAAOC,OACpB,MACJ,KAAKD,QAAOsC,WACR,GAAIe,KACJlR,MAAKkC,OAAOmN,QAAQ,SAAUL,GAC1B,GAAIM,GAAWN,EAAO7J,aAAa,gBACnC+L,GAAUpM,KAAKwK,KAEnBtP,KAAKuL,QAAQjD,aAAa,WACtB,IAAK,GAAIxJ,GAAI,EAAGA,EAAIoS,EAAU7R,SAAUP,EACpCoS,EAAUpS,GAAGyQ,aAAe1B,OAAOC,SAExC,GACH9N,KAAKgD,MAAQ6K,OAAOC,QACpB9N,KAAKuL,QAAQoF,eAAe3Q,UAOhDT,EAAOJ,QAAUyN,EAEjBpN,GAAGmB,WACAwQ,mBAAmB,WAAWC,eAAiB,SAAS/S,EAAQkB,EAAOJ,GAC1E,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,gBAG9C,IAAI8R,IAAa,EACbC,GAAa,CAEjB9R,IAAGE,OACCC,UAAWH,GAAGI,UAEdC,YACI0J,MACIzI,UAAW,KACXqB,KAAM3C,GAAGyJ,WAGbwG,aACI8B,SAAS,EACTzQ,UAAW,GACX0Q,YAAa,OACbhL,OAAQ,WAIJxG,KAAKuJ,KAAKkI,OACVzR,KAAKuJ,KAAKrF,KAAKlE,KAAKyP,eAM5BD,aACI+B,SAAS,EACTzQ,UAAW,GACX0Q,YAAa,OACbhL,OAAQ,WAGOkL,SAAS1R,KAAKwP,YAAYhP,GACrCR,MAAK2R,SAASxM,aAAa3F,GAAG8K,QAAQG,YAAczK,KAAK4R,YAAY5R,KAAKwP,YAAYhP,IACtFR,KAAK6R,aAAa3N,KAAK,UAI/BqL,cACIgC,SAAS,EACTzQ,UAAWgR,OAAOjE,OAAOC,QACzBtH,OAAQ,SAAgBuL,GACpB/R,KAAKgS,aAAaD,KAI1BJ,UACI7Q,UAAW,KACXqB,KAAM3C,GAAG+C,MAGbsP,cACI/Q,UAAW,KACXqB,KAAM3C,GAAGyJ,WAGb2I,aAAcpS,GAAGgL,aAEjBmF,KAAMnQ,GAAGyJ,UAETgJ,UAAW,IAEXC,cAAe,GAEfC,6BAA8B3S,GAAG4S,GAAG,EAAG,IAG3CvQ,OAAQ,WACJ7B,KAAK6Q,SAAU,EACf7Q,KAAKqS,OAAS7S,GAAGoK,KAAK,UAEtB5J,KAAKsS,UAAYtS,KAAKuS,yBAA2B,EAEjDvS,KAAKgS,gBAGTA,aAAc,SAAsBD,GAChC,GAAI/O,GAAQhD,KAAKuP,YAKjB,IAJIwC,IAAaD,OAAOjE,OAAOsB,UAC3BnP,KAAK2P,KAAKxK,aAAa3F,GAAG8K,QAAQ7D,SAAU,GAG5CzD,IAAU8O,OAAOjE,OAAOC,QACxB9N,KAAKwS,WACLxS,KAAKuJ,KAAKrF,KAAK,QACflE,KAAK6Q,SAAU,MACZ,IAAI7N,IAAU8O,OAAOjE,OAAOgC,SAC3BkC,IAAaD,OAAOjE,OAAO4E,UAC3BzS,KAAK0S,WAET1S,KAAK2R,SAASxM,aAAa3F,GAAGwG,QAAQzB,cAAe,MAClD,IAAIvB,IAAU8O,OAAOjE,OAAO4E,SAC3BnB,KAAe,IACfA,GAAa,EACb9R,GAAGoK,KAAK,0BAA0BzE,aAAa,aAAawN,SAAS,IAGzE3S,KAAK6R,aAAa3N,KAAK,aACpB,IAAIlB,IAAU8O,OAAOjE,OAAO+E,WAC/B5S,KAAKwS,eAGF,IAAIxP,IAAU8O,OAAOjE,OAAOsC,WAAY,CAEvCnQ,KAAKwS,UACL,IAAIpG,GAAUpM,KAAK2C,KAAKkQ,eAAe,WACnCC,EAAM,IAAM9S,KAAKoM,OACrBA,GAAQxJ,QAAS,EACjBwJ,EAAQjH,aAAa3F,GAAG4C,OAAO2Q,OAASD,EACxC1G,EAAQ1G,UAAUlG,GAAGwK,SAASxK,GAAG0Q,OAAO,EAAG,EAAG,KAAM1Q,GAAGuL,SAAS,WAC5DqB,EAAQhB,EAAI,GACZgB,EAAQxJ,QAAS,KACjBoQ,OAAOxT,GAAGyT,QAAQ,SAEfjQ,KAAU8O,OAAOjE,OAAO2C,OAE3BxQ,KAAKuJ,KAAKrF,KAAK,OACflE,KAAK2C,KAAK+C,UAAUlG,GAAGwK,SAASxK,GAAGyL,QAAQ,KAAMzL,GAAGuL,SAAS,WACzD/K,KAAK2C,KAAKuQ,oBACXlT,UAInBmT,UAAW,WACP,GAAIjE,GAAQlP,IAERA,MAAKuP,eAAiBuC,OAAOjE,OAAOgC,WAGpCwB,KAAe,IACf,WACIA,GAAa,CACb,IAAI+B,GAAM5T,GAAGoK,KAAK,0BAA0BzE,aAAa,YACzD+J,GAAM5G,aAAa,WACf8K,EAAIT,SAAS,IACd,MAGX3S,KAAK6Q,SAAU,EACf7Q,KAAK2R,SAASxM,aAAa3F,GAAGwG,QAAQzB,cAAe,EACrDvE,KAAK6R,aAAa3N,KAAK,WAEvBlE,KAAKqS,OAAOvO,KAAK,eAAgB9D,QAGrC0S,SAAU,WACN1S,KAAK2R,SAASlM,iBACdzF,KAAK2R,SAAS/O,QAAS,EACvB5C,KAAK2R,SAASjM,UAAUlG,GAAG0Q,OAAO,GAAK,EAAG,OAG9CsC,SAAU,WACNxS,KAAK2R,SAAS/M,EAAI5E,KAAK2R,SAASvG,EAAI,EACpCpL,KAAK2R,SAAS/O,QAAS,GAG3B+F,OAAQ,SAAgBrB,GAChBtH,KAAKuP,eAAiBuC,OAAOjE,OAAOC,SACpC9N,KAAKqT,mBAAmB/L,IAIhC+L,mBAAoB,SAA4B/L,GAE5C,GADAtH,KAAKsS,WAAahL,EACdtH,KAAKsS,UAAYtS,KAAKuS,yBAA0B,CAChDvS,KAAKsS,UAAY,CAEjB,IAAIgB,GAAQtT,KAAKmS,4BACjBnS,MAAKuS,yBAA2Be,EAAM1O,EAAIwI,KAAKE,UAAYgG,EAAMlI,EAAIkI,EAAM1O,EAE3E,IAAI2O,GAAYnG,KAAKC,MAAsB,EAAhBD,KAAKE,SAChCtN,MAAKkS,eAA+B,IAAdqB,EAAkB,GAAK,EAGjD,GAAIC,GAAQxT,KAAKkS,cAAgB5K,EAC7B1C,EAAI5E,KAAK2C,KAAKiC,EAAI4O,EAClBC,EAAQzT,KAAKqS,OAAOoB,OAEf,GAAL7O,GAAUA,GAAK6O,KACfzT,KAAKkS,eAAiB,GACtBtN,EAAI5E,KAAK2C,KAAKiC,EAAI4O,GAGlBxT,KAAKkS,cAAgB,GAAoC,cAA/BlS,KAAKuJ,KAAKmK,YAAYC,KAChD3T,KAAKuJ,KAAKrF,KAAK,aACRlE,KAAKkS,cAAgB,GAAoC,SAA/BlS,KAAKuJ,KAAKmK,YAAYC,MACvD3T,KAAKuJ,KAAKrF,KAAK,QAGnBlE,KAAK2C,KAAKiC,EAAIA,KAItBpF,GAAGmB,cACGiT,cAAgB,SAASvV,EAAQkB,EAAOJ,GAC9C,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,eAG1BlB,GAAQ,gBAE5BmB,IAAGE,OACCC,UAAWH,GAAGI,UAEdC,cAEAgC,OAAQ,WAEJ7B,KAAK6T,gBAEL,IAAIxB,GAAS7S,GAAGoK,KAAK,SACrByI,GAAOnM,GAAG,eAAgBlG,KAAK8T,mBAAoB9T,OAGvD+T,QAAS,WACL/T,KAAK6T,cAAcxE,QAAQ,SAAU2E,IACjC,SAAWA,GACPA,EAAKnD,SAAU,EACfmD,EAAKzE,aAAeuC,OAAOjE,OAAO4E,SAElCwB,WAAW,WACPD,EAAKzE,aAAeuC,OAAOjE,OAAOgC,UACnC,MACJmE,KAGPhU,KAAK6T,kBAGTlL,OAAQ,SAAgBrB,GACpBtH,KAAKkU,mBACLlU,KAAKmU,oBAAoB7M,IAG7B4M,iBAAkB,WAEd,IAAK,GADDL,GAAgB7T,KAAK6T,cAChB/U,EAAI+U,EAAcxU,OAAS,EAAGP,GAAK,EAAGA,IAAK,CAChD,GAAIsV,GAAQP,EAAc/U,EAErBsV,GAAMvD,SACPgD,EAActG,OAAOzO,EAAG,KAKpCqV,oBAAqB,SAA6B7M,GAC9C,GAAIuM,GAAgB7T,KAAK6T,cACrBxU,EAASwU,EAAcxU,MAE3B,MAAa,EAATA,GAOJ,IAAK,GAHDgV,GAAc,GACdb,EAAQK,EAAc,GAAG5B,UAAY3K,EAEhCxI,EAAI,EAAOO,EAAJP,EAAYA,IAAK,CAQ7B,IAAK,GAFDwV,GALAC,EAAQV,EAAc/U,GACtB8F,EAAI2P,EAAM5R,KAAKiC,EACf4P,GAAQ,EACRC,EAAO,EACPC,EAAQ,EAGHC,EAAI,EAAOtV,EAAJsV,EAAYA,IAAK,CAC7B,GAAIC,GAASf,EAAcc,EAC3B,IAAIC,IAAWL,EAAf,CAKA,GADAD,EAAM1P,EAAIgQ,EAAOjS,KAAKiC,EAClBwI,KAAKyH,IAAIP,GAAOD,EAAa,CAC7BG,GAAQ,CACR,OAGAF,EAAM,EACNG,IAEAC,KAIJF,IAIJD,EAAM5R,KAAKiC,GAAK6P,EAAOC,GAASlB,EAAQA,KAIhDsB,gBAAiB,SAAyBC,GACtC,GAAIlB,GAAgB7T,KAAK6T,aAEmB,MAAxCA,EAAc7C,QAAQ+D,KAI1BlB,EAAc/O,KAAKiQ,GAEflB,EAAcxU,OAAS,IAAM0V,EAAavF,cAAgBqE,EAAc,GAAGrE,aAAeuF,EAAatF,cAAgBoE,EAAc,GAAGpE,eACxIsF,EAAalE,SAAU,EACvB7Q,KAAK,cAIb8T,mBAAoB,SAA4B1Q,GAC5CpD,KAAK8U,gBAAgB1R,EAAMmJ,WAInC/M,GAAGmB,WACAyQ,cAAgB,kBAAkB4D,QAAU,SAAS3W,EAAQkB,EAAOJ,GACvE,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,UAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UACdwG,QACIC,mBAAmB,EACnB4O,iBAAkB5W,EAAQ,WAE9BwB,YACIiK,QACIhJ,UAAW,KACXqB,KAAM3C,GAAG+C,KACTmE,QAAS,gCAEbiB,QACI7G,UAAWtB,GAAGyH,KAAKC,MAEvBsM,OACI1S,UAAW,IACX4F,QAAS,mDAQjB7E,OAAQ,WACJ7B,KAAK2J,OAAS3J,KAAKmF,aAAa,WAGpC+P,kBAAmB,SAA2BvS,GAC1C,GAAIiE,GAAQjE,EAAKwS,sBAAsB3V,GAAGyH,KAAKC,MAC3CkO,EAAQ5V,GAAGoM,SAASyJ,iBACxB,OAAID,GACOA,EAAME,qBAAqB1O,GAE3BA,GAIf2O,kBAAmB,SAA2B5S,EAAM6S,GAChD,GAAIJ,GAAQ5V,GAAGoM,SAASyJ,iBACpBD,KACAI,EAAMhW,GAAG4S,GAAGgD,EAAMD,sBAAsBK,KAGxC7S,EAAKqE,SADLrE,EAAK8S,OACW9S,EAAK8S,OAAOH,qBAAqBE,GAEjCA,GAIxBnO,WAAY,SAAoBC,GAC5B,GAAKtH,KAAK8J,QAGL9J,KAAK2J,OAAV,CAIA,GAAI+L,GAAM1V,KAAKkV,kBAAkBlV,KAAK2C,MAElCgT,EAAO3V,KAAK8J,OAAOqL,sBAAsB3V,GAAGyH,KAAKC,KACrDyO,GAAO3V,KAAK2J,OAAO/C,MAAMgP,mBAAmBD,GAE5CA,EAAKE,QAAQ7V,KAAK2H,OAElB,IAII6N,GAJAM,EAAQH,EAAKlO,IAAIiO,GACjBK,EAASD,EAAMC,SACfC,EAAWhW,KAAKwT,MAAQlM,CAG5B,IAAc0O,EAAWA,GAArBD,EACAP,EAAMG,MACH,CAEH,GAAIM,GAAMH,EAAMI,QAAQ9I,KAAK+I,KAAKJ,GAClCP,GAAME,EAAIG,QAAQI,EAAIpO,QAAQmO,IAGlChW,KAAKuV,kBAAkBvV,KAAK2C,KAAM6S,OAI1ChW,GAAGmB,WACAwF,OAAS,WAAWiQ,WAAa,SAAS/X,EAAQkB,EAAOJ,GAC5D,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,YAI9C,EAAA,GAAI8W,GAAUhY,EAAQ,WAClBuC,EAAWvC,EAAQ,YACnBiY,EAAYjY,EAAQ,YAERmB,IAAGE,OACfC,UAAWH,GAAGI,UAEdC,YACI0L,SACIzK,UAAW,KACXqB,KAAMkU,GAEVE,UACIzV,UAAW,KACXqB,KAAM3C,GAAGyJ,WAEbuN,UACI1V,UAAW,KACXqB,KAAM3C,GAAG+C,MAEbkU,cACI3V,UAAW,KACXqB,KAAM3C,GAAGyJ,WAEbyN,iBACI5V,UAAW,KACXqB,KAAM3C,GAAGyJ,WAEb0N,UAAWL,GAGfzU,OAAQ,WACJ7B,KAAK4W,cAAe,CACpB,IAAIxB,GAAQ5V,GAAGoM,SAASiL,UACxBzB,GAAMhK,EAAI,MACVpL,KAAK2W,UAAUhE,SAAS,IAG5BmE,qBAAsB,WAClB9W,KAAKuL,QAAQwL,SACb/W,KAAK0W,gBAAgBxS,KAAK,oBAG9B8S,aAAc,WACV,GAAIhU,GAAQhD,KAAKyW,aAAaQ,kBAAkB,iBAChDjU,GAAMkU,SAAW1X,GAAG2X,SAASC,QAC7BxW,EAASQ,SAASC,UAClBrB,KAAKuL,QAAQoL,UAAUhE,SAAS,GAChC3S,KAAKyW,aAAavS,KAAK,kBACvBlE,KAAK4W,cAAe,GAGxBjO,OAAQ,SAAgBrB,GACpB,GAAItH,KAAK4W,aAAc,CACnB,GAAIxB,GAAQ5V,GAAGoM,SAASiL,UACxB,IAAIzB,EAAMhK,GAAK,EACX,MAEJgK,GAAMhK,GAAK,IAAM9D,EACjBtH,KAAKwW,SAASpL,GAAK,IAAM9D,EACrB8N,EAAMhK,EAAI,IACVgK,EAAMhK,EAAI,EACVpL,KAAK4W,cAAe,EACpB5W,KAAKuW,SAASrS,KAAK,sBAOnC1E,GAAGmB,WACAC,SAAW,WAAW0V,UAAY,YAAYD,QAAU,YAAYC,WAAa,SAASjY,EAAQkB,EAAOJ,GAC5G,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,aAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdC,YACIwX,MAAO7X,GAAG4C,MACVkV,gBAAiB,EACjBC,cACIzW,aACAqB,KAAM,SACNqV,WAAW,GAEfC,aAAc,GAIlB5V,OAAQ,WACJ7B,KAAK0X,cAAgB,EACrB1X,KAAK2C,KAAK+H,QAAU,GAQxBiI,SAAU,SAAkBxH,GACxBnL,KAAK0X,cAAgBvM,CACrB,IAAIwM,GAAanY,GAAGyL,QAAQjL,KAAKyX,cAC7BG,EAAYpY,GAAGoL,OAAO5K,KAAKyX,cAC3B3M,EAAWtL,GAAGuL,SAAS/K,KAAK6X,WAAY7X,MACxC8X,EAAMtY,GAAGwK,SAAS2N,EAAY7M,EAAU8M,EAC5C5X,MAAK2C,KAAK+C,UAAUoS,IACR,IAAR3M,GAAqB,IAARA,IACbnL,KAAKsI,aAAa,WACdtI,KAAK+X,YACN,IAIXA,SAAU,WACN/X,KAAK2C,KAAK+C,UAAUlG,GAAGyL,QAAQ,KAGnC4M,WAAY,WACR7X,KAAKqX,MAAMtE,OAAS/S,KAAKuX,aAAavX,KAAK0X,kBASnDlY,GAAGmB,cACGoB,UAAY,SAAS1D,EAAQkB,EAAOJ,GAC1C,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,WAG/BC,IAAGE,OACdC,UAAWH,GAAGI,UAEdC,YACImY,SACIlX,UAAW,KACXqB,KAAM3C,GAAG4C,QAIjBP,OAAQ,WACJ7B,KAAKqC,MAAQrC,KAAKmF,aAAa,kBAC/BnF,KAAKiY,aAAc,EACnBjY,KAAKkY,cAAgB,EACrBlY,KAAKmY,iBAAmB,EACxBnY,KAAKsM,SAAW,EAChBtM,KAAKoY,SAAiC,IAAtBpY,KAAKqC,MAAMgW,SAC3BrY,KAAKsY,iBAAmB,GAG5BC,YAAa,SAAqBlM,EAAOmM,EAAUC,GAC/CzY,KAAKiY,aAAc,EACnBjY,KAAKkY,cAAgB7L,EACrBrM,KAAKmY,iBAAmBK,EACxBxY,KAAKsY,iBAAmBI,WAAW1Y,KAAKqC,MAAMgW,SAASM,QAAQ,IAC/D3Y,KAAKsM,SAAWtM,KAAKmY,kBAAoBnY,KAAKsY,iBAAmB,EAAI,IAGzEM,SAAU,WACF5Y,KAAKiY,cACLjY,KAAKsY,iBAAmBI,WAAW1Y,KAAKqC,MAAMgW,SAASM,QAAQ,IAC3D3Y,KAAKsY,mBAAqBtY,KAAKmY,mBAC/BnY,KAAKqC,MAAMgW,UAAY,IAAOrY,KAAKsM,UAEnCtM,KAAKoY,WAAapY,KAAKkY,gBACvBlY,KAAKoY,UAAY,EAAIpY,KAAKsM,SAC1BtM,KAAKgY,QAAQjF,OAAS/S,KAAKoY,UAE3BpY,KAAKsY,kBAAoBtY,KAAKmY,kBAAoBnY,KAAKoY,WAAapY,KAAKkY,gBACzElY,KAAKiY,aAAc,KAK/BtP,OAAQ,SAAgBrB,GACpBtH,KAAK4Y,aAIbpZ,IAAGmB,cACGoD,WAAa,SAAS1F,EAAQkB,EAAOJ,GAC3C,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,YAI9C,IAAIuC,GAAczD,EAAQ,eACtBiN,EAAgBjN,EAAQ,iBAExBwa,GACA,EAAG,MACHC,EAAG,OACHC,EAAG,OACHC,EAAG,QACHC,EAAG,QACHC,EAAG,QACHC,EAAG,QACHC,EAAG,QACHC,EAAG,QACHC,EAAG,WAGHC,EAAa,GACbC,EAAY,EACZC,EAAY,IAEZ1V,EAAYvE,GAAGE,OACfC,UAAWH,GAAGI,UAEdC,YACI4E,UACI3D,UAAW,EACXqB,KAAM3C,GAAGka,QACTnI,SAAS,GAGboI,UACI7Y,UAAW,KACXqB,KAAMmJ,IAIdnK,SACIC,SAAU,MAGdS,OAAQ,WACJkC,EAAU3C,SAAWpB,MAGzB6C,MAAO,WACH7C,KAAKyE,SAAW,EAChBzE,KAAKsM,SAASiN,IAIlBjN,SAAU,SAAkBD,GACxBrM,KAAKyE,UAAY4H,EACjBrM,KAAKyE,SAAWzE,KAAKyE,UAAYgV,EAAYA,EAAYzZ,KAAKyE,SAC9D3C,EAAYV,SAASiB,MAAMkW,YAAYvY,KAAKyE,SAAUzE,KAAKyE,SAAWV,EAAU0V,YAIpFzV,WAAY,SAAoBqI,GAC5BrM,KAAKyE,UAAY4H,EACjBrM,KAAKyE,SAAWzE,KAAKyE,UAAY+U,EAAYA,EAAYxZ,KAAKyE,SAC9D3C,EAAYV,SAASiB,MAAMkW,YAAYvY,KAAKyE,SAAUzE,KAAKyE,SAAWV,EAAU0V,WAEhFzZ,KAAKsI,aAAa,WACVtI,KAAKyE,SAAW,KAChBzE,KAAK2Z,SAAShX,KAAKC,QAAS,IAEjC,KAIXmB,GAAUyV,UAAYA,EACtBzV,EAAU0V,UAAYA,EACtB1V,EAAU8U,OAASA,EAEnBrZ,GAAGmB,WACAmB,YAAc,cAAcwJ,cAAgB,kBAAkBsO,UAAY,SAASvb,EAAQkB,EAAOJ,GACrG,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,YAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdC,cAaAgC,OAAQ,eAQZrC,GAAGmB,cACGkZ,OAAS,SAASxb,EAAQkB,EAAOJ,GACvC,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,SAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdC,YACIwX,MAAO7X,GAAG4C,MACViI,OAAQ7K,GAAG8K,OACXwP,SAAUta,GAAGgL,aACb5G,SACI9C,UAAW,EACXqB,KAAM3C,GAAGka,QACTnI,SAAS,GAEb/M,MACI1D,UAAW,EACXqB,KAAM3C,GAAGka,QACTnI,SAAS,GAEbjN,OAAQ9E,GAAGwG,OACX+T,SAAU,GAGdC,UAAW,WACHha,KAAK8K,WACL9K,KAAK8K,SAAS1L,KAAKY,KAAK8J,OAAQ9J,KAAK4D,QAAS5D,KAAKwE,MACnDxE,KAAKsE,OAAOC,cAAe,EAC3BvE,KAAKsI,aAAatI,KAAKia,iBAAiBxZ,KAAKT,MAAOA,KAAK+Z,YAIjEE,iBAAkB,WACd,GAAIlW,GAAY1F,EAAQ,YACpB2B,MAAKwE,KAAOT,EAAU3C,SAASqD,WAGnCzE,KAAKsE,OAAOC,cAAe,IAG/Ba,YAAa,SAAqBF,EAAW4F,EAAUhB,GACnD9J,KAAK4D,QAAUsB,EAAU1E,GACzBR,KAAKwE,KAAOU,EAAUV,KACtBxE,KAAKqX,MAAMtE,OAAS/S,KAAKwE,KACzBxE,KAAKqK,OAAOI,YAAczK,KAAK8Z,QAAQ9Z,KAAK4D,SAC5C5D,KAAK8K,SAAWA,EAChB9K,KAAK8J,OAASA,KAItBtK,GAAGmB,WACAoD,UAAY,cAAcsS,SAAW,SAAShY,EAAQkB,EAAOJ,GAChE,YAyBA,SAAS+a,GAAaxK,EAAMlP,GACxB,OACIA,GAAIA,EACJkP,KAAMA,EACNyK,MAAO,EACPC,MAAO,GA7Bf5a,GAAGC,QAAQF,EAAQ,0BAA2B,WAG9ClB,EAAQ,mBAcR,KAAK,GAbDuO,GAAQvO,EAAQ,SAChBgc,EAAOhc,EAAQ,WACfyD,EAAczD,EAAQ,eACtBgL,EAAWhL,EAAQ,YACnBiN,EAAgBjN,EAAQ,iBACxBiB,EAAWjB,EAAQ,YACnBuC,EAAWvC,EAAQ,YACnBiY,EAAYjY,EAAQ,aAEpBic,EAAe9a,GAAG+a,KAAKC,QAAQ9I,UAC/B+I,KACAC,GAAmB,EAAG,EAAG,GAAI,GAAI,IACjCC,KACK7b,EAAI,EAAGA,EAAIwb,EAAajb,SAAUP,EAAG,CAC1C,GAAI0B,GAAK8Z,EAAaxb,GAAGuN,KACzBoO,GAAOja,GAAM,GAAI6Z,GACjBI,EAAOja,GAAIA,GAAKA,EAChBma,EAAOD,EAAgB5b,IAAM0B,EAYjC,GAAI6V,GAAU7W,GAAGE,OACbC,UAAWH,GAAGI,UAEdC,YAEI+a,QACI9Z,aACAqB,MAAOkY,IAIXQ,MACI/Z,UAAW,KACXqB,KAAM3C,GAAG+C,MAGbwJ,aACIjL,UAAW,KACXqB,KAAML,GAGVgZ,UACIha,UAAW,KACXqB,KAAMkH,GAGVsQ,UACI7Y,UAAW,KACXqB,KAAMmJ,GAGVyP,UACIja,UAAW,KACXqB,KAAM7C,GAGVqX,UAAWL,EAGX0E,UAAW,GAGXzK,SAAU,EAEVU,SAAU,GAGVgK,WAAY,GAGZC,WAAY,GAGhBC,MAAO,WACHnb,KAAKob,QAAS,EACdpb,KAAK2C,KAAKmB,KAAK,UAGnBiT,OAAQ,WACJ/W,KAAKob,QAAS,EACdpb,KAAK2C,KAAKmB,KAAK,WAInBjC,OAAQ,WACJ7B,KAAKoP,WACLpP,KAAKqb,YAAc,EACnBrb,KAAKsb,aAAe,EAEpBtb,KAAKub,cAAe,EAEpBvb,KAAKob,QAAS,EAEdpb,KAAKwb,IAAMxb,KAAKmF,aAAa,OAG7BnF,KAAKyb,aAAe,GAAI7O,GAAM5M,MAE9BA,KAAK4O,cAAgB,GAAIhC,GAAM5M,MAE/BA,KAAK0b,iBAEL1b,KAAK2b,YAAc3b,KAAKgb,UACxBhb,KAAK4b,aAAe5b,KAAKib,WAIzBjb,KAAK+a,SAASjb,KAAK,WACf,IAAK,GAAIhB,GAAI,EAAGA,EAAIwb,EAAajb,SAAUP,EAAG,CAC1C,GAAI0B,GAAK8Z,EAAaxb,GAAGuN,MACrBwP,EAAW7b,KAAK+a,SAAS9a,SAASO,EACtCia,GAAOja,GAAIuP,UAAY+L,SAASD,EAAS9L,WACzC0K,EAAOja,GAAIoP,aAAekM,SAASD,EAASjM,cAC5C6K,EAAOja,GAAIyR,UAAY6J,SAASD,EAAS5J,WACzCwI,EAAOja,GAAIgO,WAAasN,SAASD,EAASrN,YAC1CiM,EAAOja,GAAI8P,YAAcwL,SAASD,EAASvL,aAC3CmK,EAAOja,GAAIub,cAAgBD,SAASD,EAASE,eAC7CtB,EAAOja,GAAIwb,YAAcF,SAASD,EAASG,aAC3CvB,EAAOja,GAAIyb,WAAaH,SAASD,EAASI,YAC1CxB,EAAOja,GAAI0b,WAAaJ,SAASD,EAASK,cAE/Czb,KAAKT,QAGZmc,UAAW,SAAmBC,EAAOC,GACjC,GAAID,EAAM3N,cAAgB2N,EAAMrO,MAAQqO,EAAMrO,KAAKvN,KAAO6b,EAAQ,CAC9D,GAAIvd,GAGAwQ,EACAI,EAEA4M,EALApa,EAASka,EAAMla,OACf8L,KAGAuO,EAAM,CAEV,KAAKzd,EAAI,EAAGA,EAAIoD,EAAO7C,SAAUP,EAC7BwQ,EAAWpN,EAAOpD,GAAGqG,aAAa,iBAC7BmK,EAASuB,UAGdnB,EAAOJ,EAASG,YACZzB,EAAM0B,IACN1B,EAAM0B,KACF1B,EAAM0B,GAAQ6M,IACdA,EAAMvO,EAAM0B,GACZ4M,EAAa5M,IAGjB1B,EAAM0B,GAAQ,EAItB,IAAI3B,GAAOqO,EAAMrO,IACbuO,IAAcC,GAAOxO,EAAKS,aAC1BxO,KAAKsI,aAAa,WACd,GAAIkU,GAASC,MAAMzL,QAAQsL,EAC3Btc,MAAK8a,SAASpR,SAAS8S,IAExB,KACH5b,EAASQ,SAASI,aAClBxB,KAAK0c,aAAa3O,EAAMuO,GACxBtc,KAAKoM,QAAQmQ,EAAMxO,EAAKiO,YAAajO,GACrCqO,EAAMnN,QAAQpB,OAAOsC,WAAYmM,QAE9BF,GAAM1N,aAAe0N,EAAMlO,aAAelO,KAAKoP,QAAQiN,GAAQ3M,MACtE1P,KAAKoM,QAAQgQ,EAAMla,OAAO7C,OAASob,EAAO4B,GAAQL,YAAavB,EAAO4B,IACtED,EAAMnN,QAAQpB,OAAOsC,aACdiM,EAAMrO,MAEbqO,EAAM1L,UAIdvE,WAAY,SAAoBkQ,GAC5Brc,KAAKmc,UAAUnc,KAAK4O,cAAeyN,EAEnC,KAAK,GAAIvd,GAAI,EAAGA,EAAIkB,KAAK0b,cAAcrc,SAAUP,EAAG,CAChD,GAAIsd,GAAQpc,KAAK0b,cAAc5c,EAC/BkB,MAAKmc,UAAUC,EAAOC,KAI9BjQ,QAAS,SAAiBjI,EAAW4J,GACjC/N,KAAKwb,IAAIpP,QAAQjI,EACjB,IAAIwY,GAAUvP,KAAKwP,MAAM7O,EAAKmO,WAA6B,EAAhB9O,KAAKE,SAAe,EAC/DtN,MAAKmF,aAAa,aAAa0X,SAASF,GACxC/b,EAASQ,SAASM,UAGlB,IAAIV,GAAShB,KAAKoP,QAAQrB,EAAKvN,GAC/BQ,GAAOmZ,OACP,IAAI2C,GAAY9b,EAAOoZ,KACvBpZ,GAAOoZ,MAAQhN,KAAKC,MAAMrM,EAAOmZ,MAAQ,GACrCnZ,EAAOoZ,MAAQ0C,GACf9c,KAAKwb,IAAIhP,WAAWxL,EAAOR,KAInCuc,iBAAkB,WACd/c,KAAK+L,YAAY7J,OAAO6Q,OAAS/S,KAAKkb,UAEtC,KAAK,GADDqB,GAAKpC,EACArb,EAAI,EAAGA,EAAI4b,EAAgBrb,SAAUP,EAE1C,GADAqb,EAAQO,EAAgB5b,GACpBkB,KAAKkb,YAAcf,GAASQ,EAAOR,GACnCoC,EAAMpC,EACN3Z,EAAKma,EAAOR,OACT,IAAIna,KAAKkb,WAAaf,EACzB,KAGR,IAAIoC,EAAK,CACL,GAAI1X,GAAW7E,KAAK+L,YAAYhJ,UAAU4X,EAAO4B,GACjD1X,IAAY7E,KAAKgd,mBAAmBnY,KAI5CmY,mBAAoB,SAA4Bva,GAC5C,IAAK,GAAI3D,GAAI,EAAGA,EAAI2D,EAAOpD,SAAUP,EAAG,CACpC,GAAI0B,GAAKiC,EAAO3D,EACZ2b,GAAOja,IACPR,KAAK4a,OAAO9V,KAAK2V,EAAOja,MAKpCyc,cAAe,WACPjd,KAAK4O,cAAcH,cACnBzO,KAAK4O,cAAcK,QAAQpB,OAAOgC,WAI1CqN,MAAO,WACCld,KAAKub,gBAAiB,IACtBvb,KAAKub,cAAe,EACpBvb,KAAKsI,aAAa,WACdtI,KAAK2W,UAAUhE,SAAS,IACzB,GAEP,KAAK,GAAI7T,GAAI,EAAGA,EAAIkB,KAAK4a,OAAOvb,SAAUP,EAAG,CACzC,GAAIiP,GAAO/N,KAAK4a,OAAO9b,EACvBkB,MAAK4O,cAAcnB,MAAMzN,KACzB,IAAImd,GAAQ,EAAoB,EAAhB/P,KAAKE,SACjB8P,EAAUpd,KAAKyb,aAAa9M,MAAMZ,EAAM/N,KAAK4O,cACjD,IAAIwO,EAAS,CACTpd,KAAK4O,cAAcb,KAAOA,EAC1B/N,KAAK4O,cAAcR,UAAW,EAC9BpO,KAAKsI,aAAatI,KAAKid,cAAeE,EACtC,UAKZT,aAAc,SAAsB3O,EAAM2B,GACtC1P,KAAKoP,QAAQrB,EAAKvN,IAAM0Z,EAAaxK,EAAM1P,KAAKsb,cAChDtb,KAAKsb,eACLtb,KAAKqb,YAAcgC,OAAOC,KAAKtd,KAAKoP,SAAS/P,OAC7CW,KAAK2b,YAAc3b,KAAKgb,SACxB,IAAI/N,GAAQjN,KAAK4a,OAAO5J,QAAQjD,EAClB,MAAVd,GACAjN,KAAK4a,OAAOrN,OAAON,EAAO,GAE9BA,EAAQ6C,YAAYkB,QAAQtB,GACxBzC,EAAQ,IACR6C,YAAYvC,OAAON,EAAO,IAIlC0D,eAAgB,SAAwByL,GACpC,GAAIX,GAAezb,KAAKyb,YAIxB,IAHAW,EAAMla,OAAOmN,QAAQ,SAAUL,GAC3ByM,EAAapN,UAAUW,KAEvBoN,IAAUpc,KAAK4O,cACfwN,EAAM5O,YACH,CACH,GAAIP,GAAQjN,KAAK0b,cAAc1K,QAAQoL,EACnCnP,IAAS,GACTjN,KAAK0b,cAAcnO,OAAON,EAAO,GAErCzN,GAAG+d,KAAKC,UAAUpB,KAI1B3L,KAAM,SAAc0J,GAChBna,KAAKkb,YAAcf,EACnBna,KAAK+c,mBACD/c,KAAKkb,WAAa,IAClBlb,KAAK2Z,SAAShX,KAAKC,QAAS,IAKpC+F,OAAQ,SAAgBrB,GACpB,IAAItH,KAAKob,OAAT,CAKIpb,KAAK4a,OAAOvb,OAAS,IAAMW,KAAK4O,cAAcR,YAC1CpO,KAAK4b,cAAgB,GAA0B,IAArB5b,KAAKqb,eAC/Brb,KAAK4b,aAAe5b,KAAKib,WACzBjb,KAAKkd,SAETld,KAAK4b,cAAgBtU,GAErBtH,KAAK4O,cAAchM,QACnB5C,KAAK4O,cAAcjG,OAAOrB,EAG9B,IAAI8U,EACJ,IAAIpc,KAAKqb,YAAc,EAAG,CAEtB,GAAIrb,KAAK2b,aAAe,EAAG,CACvB3b,KAAK2b,YAAc3b,KAAKgb,SACxB,IAAIyC,GAAcJ,OAAOC,KAAKtd,KAAKoP,SAC/BiN,EAASoB,EAAYrQ,KAAKC,MAAMD,KAAKE,SAAWmQ,EAAYpe,SAC5D0O,EAAO0M,EAAO4B,EAClBD,GAAQ5c,GAAG+d,KAAKG,UAAU9Q,GAASpN,GAAG+d,KAAKI,YAAY/Q,GAAS,GAAIA,GAAM5M,KAC1E,IAAIod,GAAUpd,KAAKyb,aAAa9M,MAAMZ,EAAMqO,EACxCgB,KACAhB,EAAMrO,KAAOA,EACbqO,EAAMnO,SAAU,EAChBjO,KAAK0b,cAAc5W,KAAKsX,GACxBA,EAAMnN,QAAQpB,OAAOsB,UAG7BnP,KAAK2b,aAAerU,EAGxB,IAAK,GAAIxI,GAAI,EAAGA,EAAIkB,KAAK0b,cAAcrc,SAAUP,EAC7Csd,EAAQpc,KAAK0b,cAAc5c,GACvBsd,EAAMxZ,QACNwZ,EAAMzT,OAAOrB,MAM7B+O,GAAQoE,OAASA,EAEjBjb,GAAGmB,WACAwQ,mBAAmB,SAASyM,UAAU,OAAOte,SAAW,WAAWsB,SAAW,WAAWkB,YAAc,cAAcuH,SAAW,WAAWiC,cAAgB,gBAAgBsB,MAAQ,QAAQ0J,UAAY,cAAcuH,YAAc,SAASxf,EAAQkB,EAAOJ,GAC9P,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,cAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdC,YACIie,KAAMte,GAAG+C,MAIbV,OAAQ,WACJ7B,KAAK2C,KAAK+C,UAAUlG,GAAGwK,SAASxK,GAAGyL,QAAQ,GAAIzL,GAAGoL,OAAO,KACzDpL,GAAG0D,aAAaC,aACZC,MAAO5D,GAAG6D,cAAc0a,iBACxBC,aAAc,SAAsBC,EAAO7a,GAEvC,OAAO,GAEX8a,aAAc,SAAWD,EAAO7a,GAC5BpD,KAAK8d,KAAKpY,UAAUlG,GAAGoL,OAAO,IAC9BpL,GAAGoM,SAASC,UAAU,SACvBpL,KAAKT,OACTA,SASXR,GAAGmB,cACGwd,kBAAoB,SAAS9f,EAAQkB,EAAOJ,GAClD,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,oBAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdC,YACIue,cACItd,UAAW,KACXqB,KAAM3C,GAAGyJ,YAKjBpH,OAAQ,aAERwc,YAAa,WACTre,KAAKoe,aAAala,KAAK,qBAS/B1E,GAAGmB,cACG0Z,MAAQ,SAAShc,EAAQkB,EAAOJ,GACtC,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,OAG9C,IAAI8a,GAAO7a,GAAGE,OACViU,KAAM,OACN9T,YACIW,GAAI,EACJuP,UAAW,EACXH,aAAc,EACdqC,UAAW,GACXzD,WAAY,EACZ8B,YAAa,EACbyL,cAAe,EACfC,YAAa,EACbC,WAAY,GACZC,WAAY,IAIpB3c,GAAOJ,QAAUkb,EAEjB7a,GAAGmB,cACG2d,WAAa,SAASjgB,EAAQkB,EAAOJ,GAC3C,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,aAG9CC,GAAGE,OACCC,UAAWH,GAAGI,UAEdC,YACIqb,WAAY,EAEZ9P,GACIjJ,MAAO3C,GAAGka,SACV5Y,cAIJkO,QACIlO,UAAW,KACXqB,KAAM3C,GAAGyM,SAKjBpJ,MAAO,WACH7C,KAAKuL,QAAUvL,KAAKmF,aAAa,WAE5BnF,KAAKuL,QAAQ6P,OAGdpb,KAAKuL,QAAQ5I,KAAKuD,GAAG,SAAU,WAC3BlG,KAAK6c,SAAS7c,KAAKkb,aACpBlb,MAJHA,KAAK6c,SAAS7c,KAAKkb,aAQ3B2B,SAAU,SAAkB1C,GACxB,GAAI5O,GAAUvL,KAAKuL,OACnB,IAAKA,EAAQsP,KAAb,CAGA,IAAK,GAAI/b,GAAI,EAAOqb,EAAJrb,IAAaA,EAAG,CAC5B,GAAIwP,GAAS9O,GAAGsD,YAAY9C,KAAKgP,QAE7BuP,EAAI/e,GAAGgf,QAAQ/K,KACnBnF,GAAO1J,EAAQ,GAAJ2Z,EAAUnR,KAAKC,MAAMD,KAAKE,SAAWiR,EAAI,IAAO,GAC3DjQ,EAAOlD,EAAIpL,KAAKoL,EAAE/L,OAAS,EAAIW,KAAKoL,EAAEtM,EAAIkB,KAAKoL,EAAE/L,QAAU,IAEvDW,KAAKoL,EAAE/L,OAAS,IAChBiP,EAAOvI,MAAQ,IAAMjH,EAAIkB,KAAKoL,EAAE/L,OAASW,KAAKoL,EAAE/L,OAAS,KAE7DiP,EAAOvI,OAAiC,KAAvBqH,KAAKE,SAAW,GAEjC,IAAImR,GAASjf,GAAGgf,QAAQE,OAASpQ,EAAOlD,CACxCkD,GAAO5D,QAAU,EACjB4D,EAAO5I,UAAUlG,GAAGoL,OAAO,IAC3BW,EAAQsP,KAAKnO,SAAS4B,EAAQmQ,GAC9BlT,EAAQkQ,aAAapN,UAAUC,GAEnC/C,EAAQ2P,YAAcf,EACtB5O,EAAQwR,uBAIhBvd,GAAGmB,cACGge,QAAU,SAAStgB,EAAQkB,EAAOJ,GACxC,YACAK,IAAGC,QAAQF,EAAQ,0BAA2B,SAI9C,IAAIsO,GAASrO,GAAG+a,MACZzM,QAAS,EACT+B,SAAU,EACV4C,SAAU,EACVG,WAAY,EACZzC,WAAY,EACZhB,QAAS,EACTqB,KAAM,IAGNkB,EAAWlS,GAAG+a,MACdqE,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,IAAK,GACLC,MAAO,KAGPvC,GAAS,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAEtF3M,GAAe,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAEhGgC,QAAOjE,OAASA,EAChBiE,OAAO2K,MAAQA,EACf3K,OAAOhC,YAAcA,EACrBgC,OAAOJ,SAAWA,EAElBlS,GAAGmB,mBACQ,UAAU,WAAW,YAAY,SAAS,eAAe,SAAS,QAAQ,SAAS,YAAY,YAAY,gBAAgB,WAAW,WAAW,aAAa,SAAS,YAAY,YAAY,eAAe,MAAM,cAAc,WAAW,QAAQ,OAAO,mBAAmB,WAAW,WAAW,gBAAgB","file":"project.js","sourcesContent":["require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"AssetMng\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, 'b181bc2SmNOeJf9tXPf0Dt7', 'AssetMng');\n// scripts/controllers/AssetMng.js\n\ncc.Class({\n    \"extends\": cc.Component,\n\n    properties: {},\n\n    // use this for initialization\n    init: function init(cb) {\n        this.wishesDB = {};\n        var url = cc.url.raw('data/wishes.json');\n        cc.loader.loadJson(url, (function (error, data) {\n            for (var i = 0; i < data.length; ++i) {\n                if (data[i].id === \"\") break;\n                this.wishesDB[data[i].id] = data[i];\n            }\n            if (cb) {\n                cb();\n            }\n        }).bind(this));\n    },\n\n    getWishInfo: function getWishInfo(id) {\n        return this.wishesDB[id];\n    }\n\n});\n// called every frame, uncomment this function to activate update callback\n// update: function (dt) {\n\n// },\n\ncc._RFpop();\n},{}],\"AudioMng\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, 'e266aPgsu1L1LkzuRdVBhos', 'AudioMng');\n// scripts/controllers/AudioMng.js\n\nvar AudioMng = cc.Class({\n    \"extends\": cc.Component,\n\n    properties: {\n        bgm: {\n            \"default\": null,\n            url: cc.AudioClip\n        },\n        ritual: {\n            \"default\": null,\n            url: cc.AudioClip\n        },\n        baby: {\n            \"default\": null,\n            url: cc.AudioClip\n        },\n        wishSFX: {\n            \"default\": [],\n            url: cc.AudioClip\n        }\n    },\n\n    statics: {\n        instance: null\n    },\n\n    playBGM: function playBGM() {\n        cc.audioEngine.playMusic(this.bgm, true);\n    },\n\n    playRitual: function playRitual() {\n        cc.audioEngine.playEffect(this.ritual, false);\n    },\n\n    playBaby: function playBaby() {\n        cc.audioEngine.playEffect(this.baby, false);\n    },\n\n    playWishSFX: function playWishSFX(wishType) {\n        if (wishType < this.wishSFX.length) {\n            cc.audioEngine.playEffect(this.wishSFX[wishType], false);\n        }\n    },\n\n    onLoad: function onLoad() {\n        AudioMng.instance = this;\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n\ncc._RFpop();\n},{}],\"BattlePanel\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '9692anGBoVDu6ZC8ZqgzCSt', 'BattlePanel');\n// scripts/ui/BattlePanel.js\n\n\nvar PowerBar = require('PowerBar');\nvar EffectMng = require('EffectMng');\nvar AudioMng = require('AudioMng');\nvar Credits = require('Credits');\n\nvar BattlePanel = cc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        people: {\n            'default': null,\n            type: cc.Label\n        },\n        power: {\n            'default': null,\n            type: PowerBar\n        },\n        skillList: {\n            'default': null,\n            type: cc.Node\n        },\n        creditPanel: Credits\n    },\n\n    statics: {\n        instance: null\n    },\n\n    onLoad: function onLoad() {\n        BattlePanel.instance = this;\n        this.skills = [];\n        this.allUnlocked = false;\n        this.creditPanel.node.active = false;\n    },\n\n    start: function start() {\n        this.instantiate();\n        this.unlockBtn(0);\n\n        this.state = 0;\n        var self = this;\n        cc.eventManager.addListener({\n            event: cc.EventListener.KEYBOARD,\n            onKeyPressed: function onKeyPressed(keyCode, event) {\n                switch (keyCode) {\n                    case cc.KEY.b:\n                        self.state++;\n                        if (self.state > 2) {\n                            self.state = 0;\n                        }\n                        self.unlockBtn(self.state);\n                        break;\n                }\n            }\n        }, this.node);\n    },\n\n    useSkill: function useSkill(skillID, costValue) {\n        this.node.emit(\"skill-fired\", { \"skillID\": skillID });\n        var Resources = require('Resources');\n        Resources.instance.spendPower(costValue);\n        this.chackBtnState(Resources);\n        EffectMng.instance.play(skillID);\n        AudioMng.instance.playWishSFX(skillID);\n    },\n\n    // 按钮状态 是否禁用\n    chackBtnState: function chackBtnState(resources) {\n        for (var i = 0, len = this.skills.length; i < len; ++i) {\n            var skill = this.skills[i];\n            skill.button.interactable = skill.cost <= resources.instance.curPower;\n        }\n    },\n\n    unlockBtn: function unlockBtn(state) {\n        if (this.allUnlocked) {\n            return;\n        }\n        if (state > 3) {\n            this.allUnlocked = true;\n        }\n        var firstPosX = 200 - state * 100;\n        var current = 0,\n            i,\n            len,\n            skill;\n        for (i = 0, len = this.skills.length; i < len; ++i) {\n            // this.skills[i].node.active = false;\n            skill = this.skills[i];\n            if (skill.node.active) {\n                current = i;\n                skill.node.x = firstPosX + 100 * i;\n            } else {\n                break;\n            }\n        }\n        var unlocked = [];\n        for (i = current + 1; i <= state && i < this.skills.length; i++) {\n            skill = this.skills[i];\n            skill.node.x = firstPosX + 100 * i;\n            skill.node.active = true;\n            unlocked.push(i);\n        }\n        return unlocked;\n    },\n\n    showCredit: function showCredit() {\n        this.creditPanel.node.active = true;\n        // this.creditPanel.startScroll();\n    },\n\n    instantiate: function instantiate() {\n        var Resources = require('Resources');\n        var skillArr = this.skillList.getChildren();\n        for (var i = 0, len = skillArr.length; i < len; ++i) {\n            var skillInfo = { id: i, cost: 10 * (i + 1) };\n            var skill = skillArr[i].getComponent('Skill');\n            skill.updateSkill(skillInfo, this.useSkill, this);\n            this.skills.push(skill);\n        }\n    }\n});\n\ncc._RFpop();\n},{\"AudioMng\":\"AudioMng\",\"Credits\":\"Credits\",\"EffectMng\":\"EffectMng\",\"PowerBar\":\"PowerBar\",\"Resources\":\"Resources\"}],\"ButtonScaler\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '108b2nVDh9IeZC26KkMkuCF', 'ButtonScaler');\n// scripts/ui/ButtonScaler.js\n\ncc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        pressedScale: 1,\n        transDuration: 0\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        var self = this;\n        self.initScale = this.node.scale;\n        self.button = self.getComponent(cc.Button);\n        self.scaleDownAction = cc.scaleTo(self.transDuration, self.pressedScale);\n        self.scaleUpAction = cc.scaleTo(self.transDuration, self.initScale);\n        function onTouchDown(event) {\n            this.stopAllActions();\n            this.runAction(self.scaleDownAction);\n        }\n        function onTouchUp(event) {\n            this.stopAllActions();\n            this.runAction(self.scaleUpAction);\n        }\n        this.node.on('touchstart', onTouchDown, this.node);\n        this.node.on('touchend', onTouchUp, this.node);\n        this.node.on('touchcancel', onTouchUp, this.node);\n    }\n});\n\ncc._RFpop();\n},{}],\"Camera\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '22060AdHZBObYbbs2Iygq7v', 'Camera');\n// scripts/utils/Camera.js\n\ncc.Class({\n    'extends': cc.Component,\n\n    editor: {\n        executeInEditMode: false,\n        playOnFocus: true\n    },\n\n    properties: {\n        previewOnFocus: {\n            'default': true,\n            notify: function notify() {\n                this.enabled = this.previewOnFocus;\n            },\n            tooltip: 'Enable to preview in editor when you select the camera',\n            editorOnly: true\n        },\n\n        world: {\n            'default': null,\n            type: cc.Node,\n            tooltip: 'The root object which contains all the object rendering in camera.'\n        }\n\n    },\n\n    // ...\n    onFocusInEditor: /*CC_EDITOR &&*/function onFocusInEditor() {\n        if (this.previewOnFocus) {\n            this.enabled = true;\n        }\n    },\n\n    onLostFocusInEditor: /*CC_EDITOR &&*/function onLostFocusInEditor() {\n        this.enabled = false;\n    },\n\n    //onEnable () {\n    //    if (this.world) {\n    //        if ( !this.world.position.equals(cc.Vec2.ZERO) ) {\n    //            cc.error('The position of your camera\\'s world node should be (0, 0)');\n    //        }\n    //        if ( this.world.rotation !== 0 ) {\n    //            cc.error('The rotation of your camera\\'s world node should be 0');\n    //        }\n    //        if ( this.world.scaleX !== 1 || this.world.scaleY !== 1) {\n    //            cc.error('The scale of your camera\\'s world node should be 1');\n    //        }\n    //    }\n    //},\n\n    onDisable: function onDisable() {\n        // revert world's transform so that the editor's scene view can be reset\n        this.world.position = cc.Vec2.ZERO;\n        this.world.scale = cc.Vec2.ONE;\n        this.world.rotation = 0;\n\n        if (CC_EDITOR && !cc.engine.isPlaying) {\n            cc.engine.repaintInEditMode();\n        }\n    },\n\n    lateUpdate: function lateUpdate(dt) {\n        var node = this.node;\n        var world = this.world;\n        if (!world) {\n            return;\n        }\n        var screenCenter;\n        if (cc.Canvas.instance) {\n            screenCenter = cc.Canvas.instance.node.position;\n        }\n\n        // compute position\n        var position = screenCenter.sub(node.position);\n\n        // compute scale\n        var scale = node.scaleX;\n        var offset = position.subSelf(screenCenter);\n        offset.mulSelf(scale);\n        position = screenCenter.add(offset);\n\n        // compute rotation\n        var rotation = -node.rotation;\n        if (rotation !== 0) {\n            position = screenCenter.add(offset.rotate(-rotation * cc.RAD));\n        }\n\n        world.position = position;\n        world.rotation = rotation;\n        world.scale = scale;\n    }\n});\n\ncc._RFpop();\n},{}],\"Credits\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, 'fed9fSD5vpCTYgFzRSPmDsB', 'Credits');\n// scripts/ui/Credits.js\n\ncc.Class({\n    \"extends\": cc.Component,\n\n    properties: {\n        scrollView: cc.ScrollView\n    },\n\n    // use this for initialization\n    startScroll: function startScroll() {},\n\n    onEnable: function onEnable() {\n        this.isInit = true;\n        this.scheduleOnce(this.scrollDown, 2);\n    },\n\n    scrollDown: function scrollDown() {\n        this.scrollView.scrollToBottom(10, false);\n    },\n\n    hide: function hide() {\n        this.node.active = false;\n        this.unschedule(this.scrollDown);\n        this.isInit = true;\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (this.isInit) {\n            this.scrollView.scrollToTop();\n            this.isInit = false;\n        }\n    }\n});\n\ncc._RFpop();\n},{}],\"EffectMng\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '3fd87b15V9E2qme/w2pc7n5', 'EffectMng');\n// scripts/utils/EffectMng.js\n\nvar EffectMng = cc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        fxRain: {\n            'default': null,\n            type: cc.ParticleSystem\n        },\n        fxMeta: {\n            'default': null,\n            type: cc.ParticleSystem\n        },\n        fxFire: {\n            'default': null,\n            type: cc.Animation\n        },\n        fxSun: {\n            'default': null,\n            type: cc.Animation\n        },\n        fxWheat: {\n            'default': null,\n            type: cc.Animation\n        }\n    },\n\n    statics: {\n        instance: null\n    },\n\n    onLoad: function onLoad() {\n        EffectMng.instance = this;\n    },\n\n    play: function play(skillID) {\n        switch (skillID) {\n            case 0:\n                // 水\n                this.fxRain.enabled = true;\n                this.fxRain.resetSystem();\n                break;\n            case 1:\n                // 火\n                this.fxFire.play('fx_lightning');\n                break;\n            case 2:\n                // 肉\n                this.fxMeta.enabled = true;\n                this.fxMeta.resetSystem();\n                break;\n            case 3:\n                // 阳光\n                this.fxSun.play('fx_sun');\n                break;\n            case 4:\n                // 麦子\n                this.fxFire.play('fx_wheat');\n                break;\n        }\n    },\n\n    update: function update(dt) {}\n});\n\ncc._RFpop();\n},{}],\"FXRitual\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '0af8dguiAxB0as1d79lEyxj', 'FXRitual');\n// scripts/ui/FXRitual.js\n\ncc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        particle: cc.ParticleSystem,\n        anim: cc.Animation,\n        sign: cc.Node\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.sign = this.sign.getComponent('FXSign');\n        this.signID = -1;\n    },\n\n    playAnim: function playAnim(signID) {\n        this.signID = signID;\n        this.anim.play('play_ritual');\n\n        var camera = cc.find('Camera');\n        var lookAt = cc.find('Camera').getComponent('LookAt');\n\n        lookAt.target = this.node;\n\n        var action = cc.sequence([cc.scaleTo(0.5, 1.5, 1.5), cc.delayTime(2), cc.scaleTo(0.5, 1, 1)]);\n        camera.runAction(action);\n    },\n\n    playParticle: function playParticle() {\n        this.particle.resetSystem();\n        this.sign.show(this.signID);\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n\ncc._RFpop();\n},{}],\"FXSign\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '1490347bspGKKclhTzReMQy', 'FXSign');\n// scripts/ui/FXSign.js\n\ncc.Class({\n    \"extends\": cc.Component,\n\n    properties: {\n        sprite: cc.Sprite,\n        sfSigns: [cc.SpriteFrame]\n    },\n\n    onLoad: function onLoad() {\n        this.sprite.enabled = false;\n    },\n\n    show: function show(signID) {\n        this.sprite.enabled = true;\n        this.sprite.spriteFrame = this.sfSigns[signID];\n        this.node.scale = 3;\n        this.node.opacity = 0;\n        this.sprite._sgNode.opacity = 255;\n        var fadeIn = cc.fadeIn(0.3);\n        var scaleDown = cc.scaleTo(0.5, 1);\n        var callback = cc.callFunc(this.wait, this);\n        this.node.runAction(cc.sequence(fadeIn, scaleDown, callback));\n    },\n\n    wait: function wait() {\n        this.scheduleOnce(function () {\n            var fadeOut = cc.fadeOut(0.5);\n            this.node.runAction(fadeOut);\n        }, 1.5);\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n\ncc._RFpop();\n},{}],\"FXWonder\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '6b42fw35dNH+7eMDuukZfc0', 'FXWonder');\n// scripts/ui/FXWonder.js\n\ncc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        particle: cc.ParticleSystem,\n        anim: cc.Animation\n    },\n\n    playAnim: function playAnim(idx) {\n        switch (idx) {\n            case 0:\n                this.anim.play('pop');\n                this.node.y -= cc.random0To1() * 80;\n                this.node.scale *= cc.random0To1() * 0.3 + 1;\n                break;\n            case 1:\n                this.anim.play('empty');\n                this.node.y += cc.random0To1() * 100;\n                break;\n            case 2:\n                this.anim.play('pop_maya');\n                this.node.y += cc.random0To1() * 60;\n                this.node.scale *= cc.random0To1() * 0.3 + 1;\n                break;\n            case 3:\n                this.anim.play('pop_egypt');\n                this.node.y += cc.random0To1() * 80;\n                break;\n            case 4:\n                this.anim.play('pop');\n                break;\n        }\n        // this.anim.play('pop');\n        this.particle.resetSystem();\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n\ncc._RFpop();\n},{}],\"GameOverPanel\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '630b5AQpM9A9bBwXOhRrRZD', 'GameOverPanel');\n// scripts/ui/GameOverPanel.js\n\ncc.Class({\n    \"extends\": cc.Component,\n\n    properties: {\n        society: {\n            \"default\": null,\n            type: cc.Node\n        },\n        eyesAnimCtrl: {\n            \"default\": null,\n            type: cc.Animation\n        }\n    },\n\n    onLoad: function onLoad() {\n        this.hasDown = false;\n        this.node.active = false;\n        this.node.on(\"touchstart\", function (event) {\n            event.stopPropagation();\n        });\n    },\n\n    onEnable: function onEnable() {\n        this.eyesAnimCtrl.play('hideEyes');\n    },\n\n    goToMainPanelClick: function goToMainPanelClick() {\n        if (this.hasDown) {\n            return;\n        }\n        this.hasDown = true;\n        cc.director.loadScene(\"game\");\n    }\n});\n\ncc._RFpop();\n},{}],\"God\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '8d8488GNe5KUoYdFG5att29', 'God');\n// scripts/controllers/God.js\n\nvar BattlePanel = require('BattlePanel');\nvar Resources = require('Resources');\n\ncc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        battlePanel: {\n            'default': null,\n            type: cc.Node\n        },\n\n        resources: {\n            'default': null,\n            type: Resources\n        },\n\n        wonderPrefab: {\n            'default': null,\n            type: cc.Prefab\n        },\n\n        wonderLayer: cc.Node\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.skills = this.node.getComponent('Skills');\n        this.society = this.node.getComponent('Society');\n\n        this.battlePanel.on('skill-fired', this.skillFired, this);\n    },\n\n    tribute: function tribute(value) {\n        this.resources.addPower(value);\n    },\n\n    skillFired: function skillFired(data) {\n        this.society.skillFired(data.detail.skillID);\n    },\n\n    showWonder: function showWonder(id) {\n        var wonder = cc.instantiate(this.wonderPrefab);\n        this.wonderLayer.addChild(wonder);\n        wonder.x = cc.randomMinus1To1() * 350;\n        wonder.getComponent('FXWonder').playAnim(id);\n    }\n});\n\ncc._RFpop();\n},{\"BattlePanel\":\"BattlePanel\",\"Resources\":\"Resources\"}],\"Group\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '244bdNcVplFa7OuEr2uSOgH', 'Group');\n// scripts/controllers/Group.js\n\nrequire('../../ykl/global');\n\nfunction randomArrayItems(arr, num) {\n    var temp = [];\n    for (var index in arr) {\n        temp.push(arr[index]);\n    }\n\n    var results = [];\n    for (var i = 0; i < num; i++) {\n        if (temp.length > 0) {\n            var arrIndex = Math.floor(Math.random() * temp.length);\n            results[i] = temp[arrIndex];\n            temp.splice(arrIndex, 1);\n        } else {\n            break;\n        }\n    }\n    return results;\n}\n\nvar Group = function Group(society) {\n    this.people = [];\n    this.unuse();\n    this.reuse(society);\n};\n\ncc.js.mixin(Group.prototype, {\n    unuse: function unuse() {\n        this.society = null;\n        this.people.length = 0;\n        this.state = States.DEFAULT;\n        this.wish = null;\n        this.poses = null;\n        this.praying = false;\n        this.prayRitual = null;\n        this.countdown = 0;\n        this.active = false;\n        this.learning = false;\n    },\n\n    reuse: function reuse(society) {\n        this.society = society;\n        this.active = true;\n    },\n\n    addMember: function addMember(newbie) {\n        if (this.state === States.DEFAULT) {\n            this.people.push(newbie);\n        }\n    },\n\n    canLearn: function canLearn(wish) {\n        return this.state === States.DEFAULT && this.people.length >= wish.ritualNeed;\n    },\n\n    isLearning: function isLearning() {\n        return this.learning === true;\n    },\n\n    isPraying: function isPraying() {\n        return this.praying === true;\n    },\n\n    split: function split(wish, learningGroup) {\n        if (this.canLearn(wish)) {\n            var need = wish.ritualNeed + Math.ceil(Math.random() * 2);\n            var leftCount = this.people.length - need;\n            leftCount < 0 && (leftCount = 0);\n            for (var i = this.people.length - 1; i >= leftCount; --i) {\n                var person = this.people.splice(i, 1);\n                learningGroup.addMember(person[0]);\n            }\n            return true;\n        }\n        return false;\n    },\n\n    toState: function toState(state, detail) {\n        var _this = this;\n\n        if (state !== this.state) {\n            this.state = state;\n            switch (state) {\n                case States.PRAYING:\n                    var ritual = this.society.rituals[this.wish.id];\n                    this.people.forEach(function (person, index) {\n                        var behavior = person.getComponent('HumanBehavior');\n                        behavior.currentState = States.PRAYING;\n                        behavior.currentWish = _this.wish;\n                        behavior.currentPose = ritual.pose;\n                        behavior.pray.getComponent(cc.Sprite).enabled = true;\n                        behavior.pray.play('pray');\n                    });\n                    this.countdown = this.wish.poseDuration;\n                    this.prayRitual = ritual.pose;\n                    this.praying = true;\n                    break;\n                case States.LEARNING:\n                    // Init learning\n                    this.poses = randomArrayItems(UnusedPoses, this.wish.poseCount);\n                    this.people.forEach(function (person, index) {\n                        var behavior = person.getComponent('HumanBehavior');\n                        behavior.currentState = States.LEARNING;\n                        behavior.currentWish = _this.wish;\n                        behavior.currentPose = _this.poses[index % _this.poses.length];\n                    });\n\n                    // 当 people 间距太小时，将 间距做一定调整\n                    var people = this.people.sort(function (a, b) {\n                        return a.x > b.x ? 1 : -1;\n                    });\n\n                    var lastX = null;\n                    for (var i = 0, l = people.length; i < l; i++) {\n                        if (i === 0) {\n                            lastX = people[i].x;\n                            continue;\n                        }\n\n                        var x = people[i].x;\n\n                        if (x - lastX < 50) {\n                            people[i].runAction(cc.moveTo(0.3, lastX + 50, people[i].y));\n                            lastX += 50;\n                        } else {\n                            lastX = x;\n                        }\n                    }\n\n                    this.countdown = this.wish.poseDuration;\n                    this.learning = true;\n                    break;\n                case States.WORSHIPING:\n                    // Not learning anymore\n                    this.poses && (this.poses.length = 0);\n                    var wish = this.wish;\n                    var people = this.people;\n                    var society = this.society;\n                    var praying = this.praying;\n                    var self = this;\n                    this.society.scheduleOnce(function () {\n                        var lostCount = 0;\n                        var array = [];\n                        people.forEach(function (person, index) {\n                            var behavior = person.getComponent('HumanBehavior');\n                            // Correct pose\n                            if (praying || detail === behavior.currentPose) {\n                                behavior.tribute = wish.tributePerP;\n                                behavior.currentState = States.WORSHIPING;\n                                array.push(person);\n                            }\n                            // Incorrect\n                            else {\n                                    if (Math.random() < society.lostCoef) {\n                                        var behavior = person.getComponent('HumanBehavior');\n                                        behavior.currentState = States.LOST;\n                                        lostCount++;\n                                    } else {\n                                        behavior.currentState = States.DEFAULT;\n                                        array.push(person);\n                                    }\n                                }\n                        });\n                        self.people = array;\n                        if (lostCount > 0) {\n                            society.lost(lostCount);\n                        }\n                    }, 0);\n                    this.wish = null;\n                    if (this.isLearning) {\n                        this.countdown = 4.5;\n                    } else {\n                        this.countdown = 2;\n                    }\n                    break;\n            }\n        }\n    },\n\n    punish: function punish() {\n        var people = this.people;\n        var society = this.society;\n        var self = this;\n        this.society.scheduleOnce(function () {\n            var lostCount = 0;\n            var array = [];\n            people.forEach(function (person, index) {\n                if (Math.random() < society.lostCoef) {\n                    lostCount++;\n                    var behavior = person.getComponent('HumanBehavior');\n                    behavior.currentState = States.LOST;\n                } else {\n                    array.push(person);\n                    person.getComponent('HumanBehavior').currentState = States.DEFAULT;\n                }\n            });\n            self.people = array;\n            if (lostCount > 0) {\n                society.lost(lostCount);\n            }\n            society.rejointDefault(self);\n        }, 0);\n        this.active = false;\n        this.state = States.DEFAULT;\n    },\n\n    update: function update(dt) {\n        var _this2 = this;\n\n        if (this.countdown > 0) {\n            this.countdown -= dt;\n        } else {\n            this.countdown = 0;\n            switch (this.state) {\n                case States.LEARNING:\n                    // Switch pose\n                    this.people.forEach(function (person) {\n                        var behavior = person.getComponent('HumanBehavior');\n                        if (!behavior.checked) {\n                            var prevPose = _this2.poses.indexOf(behavior.currentPose),\n                                poseId;\n                            do {\n                                poseId = Math.floor(Math.random() * _this2.poses.length);\n                            } while (poseId === prevPose && _this2.poses.length > 1);\n                            behavior.currentPose = _this2.poses[poseId];\n                        }\n                    });\n                    this.countdown = this.wish.poseDuration;\n                    break;\n                case States.PRAYING:\n                    var people = this.people;\n                    var society = this.society;\n                    var self = this;\n                    this.society.scheduleOnce(function () {\n                        var lostCount = 0;\n                        var array = [];\n                        people.forEach(function (person, index) {\n                            if (Math.random() < society.prayCoef) {\n                                lostCount++;\n                                var behavior = person.getComponent('HumanBehavior');\n                                behavior.currentState = States.LOST;\n                            } else {\n                                array.push(person);\n                                person.getComponent('HumanBehavior').currentState = States.DEFAULT;\n                            }\n                        });\n                        self.people = array;\n                        if (lostCount > 0) {\n                            society.lost(lostCount);\n                        }\n                        society.rejointDefault(self);\n                    }, 0);\n                    this.active = false;\n                    this.state = States.DEFAULT;\n                    break;\n                case States.WORSHIPING:\n                    var behaviors = [];\n                    this.people.forEach(function (person) {\n                        var behavior = person.getComponent('HumanBehavior');\n                        behaviors.push(behavior);\n                    });\n                    this.society.scheduleOnce(function () {\n                        for (var i = 0; i < behaviors.length; ++i) {\n                            behaviors[i].currentState = States.DEFAULT;\n                        }\n                    }, 0);\n                    this.state = States.DEFAULT;\n                    this.society.rejointDefault(this);\n                    break;\n            }\n        }\n    }\n});\n\nmodule.exports = Group;\n\ncc._RFpop();\n},{\"../../ykl/global\":\"global\"}],\"HumanBehavior\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, 'fd410vTg3VKQbu9IoKPzDA9', 'HumanBehavior');\n// ykl/HumanBehavior.js\n\nvar firstRight = false;\nvar firstWrong = false;\n\ncc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        anim: {\n            'default': null,\n            type: cc.Animation\n        },\n\n        currentPose: {\n            visible: false,\n            'default': '',\n            displayName: '当前姿势',\n            notify: function notify() {\n                //if (CC_EDITOR) return;\n\n                // 播动画\n                this.anim.stop();\n                this.anim.play(this.currentPose);\n\n                // 做其他事情\n            }\n        },\n\n        currentWish: {\n            visible: false,\n            'default': '',\n            displayName: '当前愿望',\n            notify: function notify() {\n                //if (CC_EDITOR) return;\n\n                var name = WishType[this.currentWish.id];\n                this.wishIcon.getComponent(cc.Sprite).spriteFrame = this.sfWishIcons[this.currentWish.id];\n                this.wishIconAnim.play('show');\n            }\n        },\n\n        currentState: {\n            visible: false,\n            'default': window.States.DEFAULT,\n            notify: function notify(oldState) {\n                this._updateState(oldState);\n            }\n        },\n\n        wishIcon: {\n            'default': null,\n            type: cc.Node\n        },\n\n        wishIconAnim: {\n            'default': null,\n            type: cc.Animation\n        },\n\n        sfWishIcons: [cc.SpriteFrame],\n\n        pray: cc.Animation,\n\n        moveSpeed: 300,\n\n        idleMoveSpeed: 50,\n\n        idleChangeDirectionTimeRange: cc.v2(2, 4)\n    },\n\n    onLoad: function onLoad() {\n        this.checked = false;\n        this.canvas = cc.find('Canvas');\n\n        this._idleTime = this._idleChangeDirectionTime = 3;\n\n        this._updateState();\n    },\n\n    _updateState: function _updateState(oldState) {\n        var state = this.currentState;\n        if (oldState === window.States.PRAYING) {\n            this.pray.getComponent(cc.Sprite).enabled = false;\n        }\n\n        if (state === window.States.DEFAULT) {\n            this.hideWish();\n            this.anim.play('idle');\n            this.checked = false;\n        } else if (state === window.States.LEARNING) {\n            if (oldState !== window.States.DOUBTING) {\n                this.showWish();\n            }\n            this.wishIcon.getComponent(cc.Button).interactable = true;\n        } else if (state === window.States.DOUBTING) {\n            if (firstWrong === false) {\n                firstWrong = true;\n                cc.find('Canvas/world/narrative').getComponent('Narrative').playLine(4);\n            }\n            // 头上显示问号\n            this.wishIconAnim.play('doubt');\n        } else if (state === window.States.CONFIRMING) {\n            this.hideWish();\n            // 头上有问号\n            // this.anim.play('confirming');\n        } else if (state === window.States.WORSHIPING) {\n                // 头上无问号，播放跪拜动画\n                this.hideWish();\n                var tribute = this.node.getChildByName('tribute');\n                var str = '+' + this.tribute;\n                tribute.active = true;\n                tribute.getComponent(cc.Label).string = str;\n                tribute.runAction(cc.sequence(cc.moveTo(1, 0, 120), cc.callFunc(function () {\n                    tribute.y = 80;\n                    tribute.active = false;\n                })).easing(cc.easeOut(2)));\n                // this.anim.play('p_act03');\n            } else if (state === window.States.LOST) {\n                    // 丢失或是死掉\n                    this.anim.play('die');\n                    this.node.runAction(cc.sequence(cc.fadeOut(2.5), cc.callFunc(function () {\n                        this.node.removeFromParent();\n                    }, this)));\n                }\n    },\n\n    onChecked: function onChecked() {\n        var _this = this;\n\n        if (this.currentState !== window.States.LEARNING) {\n            return;\n        }\n        if (firstRight === false) {\n            (function () {\n                firstRight = true;\n                var nar = cc.find('Canvas/world/narrative').getComponent('Narrative');\n                _this.scheduleOnce(function () {\n                    nar.playLine(3);\n                }, 1);\n            })();\n        }\n        this.checked = true;\n        this.wishIcon.getComponent(cc.Button).interactable = false;\n        this.wishIconAnim.play('confirm');\n\n        this.canvas.emit('wish-clicked', this);\n    },\n\n    showWish: function showWish() {\n        this.wishIcon.stopAllActions();\n        this.wishIcon.active = true;\n        this.wishIcon.runAction(cc.moveTo(0.2, 0, 120));\n    },\n\n    hideWish: function hideWish() {\n        this.wishIcon.x = this.wishIcon.y = 0;\n        this.wishIcon.active = false;\n    },\n\n    update: function update(dt) {\n        if (this.currentState === window.States.DEFAULT) {\n            this.handleDefaultState(dt);\n        }\n    },\n\n    handleDefaultState: function handleDefaultState(dt) {\n        this._idleTime += dt;\n        if (this._idleTime > this._idleChangeDirectionTime) {\n            this._idleTime = 0;\n\n            var range = this.idleChangeDirectionTimeRange;\n            this._idleChangeDirectionTime = range.x + Math.random() * (range.y - range.x);\n\n            var direction = Math.floor(Math.random() * 2);\n            this.idleMoveSpeed *= direction === 0 ? -1 : 1;\n        }\n\n        var speed = this.idleMoveSpeed * dt;\n        var x = this.node.x + speed;\n        var width = this.canvas.width;\n\n        if (x <= 0 || x >= width) {\n            this.idleMoveSpeed *= -1;\n            x = this.node.x - speed;\n        }\n\n        if (this.idleMoveSpeed < 0 && this.anim.currentClip.name !== 'idle-left') {\n            this.anim.play('idle-left');\n        } else if (this.idleMoveSpeed > 0 && this.anim.currentClip.name !== 'idle') {\n            this.anim.play('idle');\n        }\n\n        this.node.x = x;\n    }\n});\n\ncc._RFpop();\n},{}],\"HumanManager\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '88808PpqTxP1LWq3PyX3Lux', 'HumanManager');\n// ykl/HumanManager.js\n\nvar HumanBehavior = require('HumanBehavior');\n\ncc.Class({\n    'extends': cc.Component,\n\n    properties: {},\n\n    onLoad: function onLoad() {\n        // 已经被点击了的人类\n        this.checkedHumans = [];\n\n        var canvas = cc.find('Canvas');\n        canvas.on('wish-clicked', this.onHumanIconClicked, this);\n    },\n\n    'break': function _break() {\n        this.checkedHumans.forEach(function (item) {\n            (function (item) {\n                item.checked = false;\n                item.currentState = window.States.DOUBTING;\n\n                setTimeout(function () {\n                    item.currentState = window.States.LEARNING;\n                }, 500);\n            })(item);\n        });\n\n        this.checkedHumans = [];\n    },\n\n    update: function update(dt) {\n        this.updateHumanState();\n        this.updateHumanPosition(dt);\n    },\n\n    updateHumanState: function updateHumanState() {\n        var checkedHumans = this.checkedHumans;\n        for (var i = checkedHumans.length - 1; i >= 0; i--) {\n            var human = checkedHumans[i];\n\n            if (!human.checked) {\n                checkedHumans.splice(i, 1);\n            }\n        }\n    },\n\n    updateHumanPosition: function updateHumanPosition(dt) {\n        var checkedHumans = this.checkedHumans;\n        var length = checkedHumans.length;\n\n        if (length < 2) {\n            return;\n        }\n\n        var minDistance = 50;\n        var speed = checkedHumans[0].moveSpeed * dt;\n\n        for (var i = 0; i < length; i++) {\n            var first = checkedHumans[i];\n            var x = first.node.x;\n            var close = false;\n            var left = 0;\n            var right = 0;\n            var dif;\n\n            for (var j = 0; j < length; j++) {\n                var second = checkedHumans[j];\n                if (second === first) {\n                    continue;\n                }\n\n                dif = x - second.node.x;\n                if (Math.abs(dif) < minDistance) {\n                    close = true;\n                    break;\n                }\n\n                if (dif > 0) {\n                    left++;\n                } else {\n                    right++;\n                }\n            }\n\n            if (close) {\n                continue;\n            }\n\n            first.node.x += left > right ? -speed : speed;\n        }\n    },\n\n    addCheckedHuman: function addCheckedHuman(checkedHuman) {\n        var checkedHumans = this.checkedHumans;\n\n        if (checkedHumans.indexOf(checkedHuman) !== -1) {\n            return;\n        }\n\n        checkedHumans.push(checkedHuman);\n\n        if (checkedHumans.length > 1 && (checkedHuman.currentWish !== checkedHumans[0].currentWish || checkedHuman.currentPose !== checkedHumans[0].currentPose)) {\n            checkedHuman.checked = false;\n            this['break']();\n        }\n    },\n\n    onHumanIconClicked: function onHumanIconClicked(event) {\n        this.addCheckedHuman(event.detail);\n    }\n});\n\ncc._RFpop();\n},{\"HumanBehavior\":\"HumanBehavior\"}],\"LookAt\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '39182EXa1tHJpBfpeWWiLtq', 'LookAt');\n// scripts/utils/LookAt.js\n\ncc.Class({\n    'extends': cc.Component,\n    editor: {\n        executeInEditMode: true,\n        requireComponent: require('Camera')\n    },\n    properties: {\n        target: {\n            'default': null,\n            type: cc.Node,\n            tooltip: 'The target object to look at'\n        },\n        offset: {\n            'default': cc.Vec2.ZERO\n        },\n        speed: {\n            'default': 100,\n            tooltip: 'The max moving speed in world units per second'\n        }\n        //padding: {\n        //    default: 20,\n        //    tooltip: 'The distance in pixels between target object and the edge of screen'\n        //}\n    },\n\n    onLoad: function onLoad() {\n        this.camera = this.getComponent('Camera');\n    },\n\n    _getWorldPosition: function _getWorldPosition(node) {\n        var world = node.convertToWorldSpaceAR(cc.Vec2.ZERO);\n        var scene = cc.director.getRunningScene();\n        if (scene) {\n            return scene.convertToNodeSpaceAR(world);\n        } else {\n            return world;\n        }\n    },\n\n    _setWorldPosition: function _setWorldPosition(node, pos) {\n        var scene = cc.director.getRunningScene();\n        if (scene) {\n            pos = cc.v2(scene.convertToWorldSpaceAR(pos));\n        }\n        if (node.parent) {\n            node.position = node.parent.convertToNodeSpaceAR(pos);\n        } else {\n            node.position = pos;\n        }\n    },\n\n    lateUpdate: function lateUpdate(dt) {\n        if (!this.target) {\n            return;\n        }\n        if (!this.camera) {\n            return;\n        }\n\n        var src = this._getWorldPosition(this.node);\n        // get world position which not transformed by camera\n        var dest = this.target.convertToWorldSpaceAR(cc.Vec2.ZERO);\n        dest = this.camera.world.convertToNodeSpace(dest);\n        //\n        dest.addSelf(this.offset);\n\n        var delta = dest.sub(src);\n        var magSqr = delta.magSqr();\n        var maxDelta = this.speed * dt;\n\n        var pos;\n        if (magSqr <= maxDelta * maxDelta) {\n            pos = dest;\n        } else {\n            // tween\n            var dir = delta.divSelf(Math.sqrt(magSqr));\n            pos = src.addSelf(dir.mulSelf(maxDelta));\n        }\n\n        this._setWorldPosition(this.node, pos);\n    }\n});\n\ncc._RFpop();\n},{\"Camera\":\"Camera\"}],\"MainPanel\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '80017cfF89LOofh4s3wykhT', 'MainPanel');\n// scripts/ui/MainPanel.js\n\n\nvar Society = require('Society');\nvar AudioMng = require('AudioMng');\nvar Narrative = require('Narrative');\n\nvar MainPanel = cc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        society: {\n            'default': null,\n            type: Society\n        },\n        animCtrl: {\n            'default': null,\n            type: cc.Animation\n        },\n        eyesNode: {\n            'default': null,\n            type: cc.Node\n        },\n        startGameBtn: {\n            'default': null,\n            type: cc.Animation\n        },\n        battlePanelAnim: {\n            'default': null,\n            type: cc.Animation\n        },\n        narrative: Narrative\n    },\n\n    onLoad: function onLoad() {\n        this.hasMoveScene = false;\n        var scene = cc.director.getScene();\n        scene.y = -1450;\n        this.narrative.playLine(0);\n    },\n\n    hideMainPanelAnimEnd: function hideMainPanelAnimEnd() {\n        this.society.resume();\n        this.battlePanelAnim.play('showBattlePanel');\n    },\n\n    runMoveScene: function runMoveScene() {\n        var state = this.startGameBtn.getAnimationState('fadeInStartBtn');\n        state.wrapMode = cc.WrapMode.Reverse;\n        AudioMng.instance.playBGM();\n        this.society.narrative.playLine(1);\n        this.startGameBtn.play('fadeInStartBtn');\n        this.hasMoveScene = true;\n    },\n\n    update: function update(dt) {\n        if (this.hasMoveScene) {\n            var scene = cc.director.getScene();\n            if (scene.y >= 0) {\n                return;\n            }\n            scene.y += 300 * dt;\n            this.eyesNode.y -= 300 * dt;\n            if (scene.y > 0) {\n                scene.y = 0;\n                this.hasMoveScene = false;\n                this.animCtrl.play('hideMainPanel');\n            }\n        }\n    }\n\n});\n\ncc._RFpop();\n},{\"AudioMng\":\"AudioMng\",\"Narrative\":\"Narrative\",\"Society\":\"Society\"}],\"Narrative\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '0c78c7VGApJq6AlYoc9hlfy', 'Narrative');\n// scripts/ui/Narrative.js\n\ncc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        label: cc.Label,\n        durationPerLine: 0,\n        textContents: {\n            'default': [],\n            type: 'String',\n            multiline: true\n        },\n        fadeDuration: 0\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.currentTextId = 0;\n        this.node.opacity = 0;\n        // let idx = 0;\n        // this.schedule(function() {\n        //     this.playLine(idx);\n        //     idx++;\n        // }.bind(this), this.durationPerLine, 4, 0);\n    },\n\n    playLine: function playLine(idx) {\n        this.currentTextId = idx;\n        var actFadeOut = cc.fadeOut(this.fadeDuration);\n        var actFadeIn = cc.fadeIn(this.fadeDuration);\n        var callback = cc.callFunc(this.switchText, this);\n        var seq = cc.sequence(actFadeOut, callback, actFadeIn);\n        this.node.runAction(seq);\n        if (idx === 4 || idx === 3) {\n            this.scheduleOnce(function () {\n                this.hideLine();\n            }, 3);\n        }\n    },\n\n    hideLine: function hideLine() {\n        this.node.runAction(cc.fadeOut(2));\n    },\n\n    switchText: function switchText() {\n        this.label.string = this.textContents[this.currentTextId];\n    }\n\n});\n// called every frame, uncomment this function to activate update callback\n// update: function (dt) {\n\n// },\n\ncc._RFpop();\n},{}],\"PowerBar\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '63e23/x1P1DHajbaVkXJyIp', 'PowerBar');\n// scripts/ui/PowerBar.js\n\nvar PowerBar = cc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        content: {\n            'default': null,\n            type: cc.Label\n        }\n    },\n\n    onLoad: function onLoad() {\n        this.power = this.getComponent('cc.ProgressBar');\n        this.changePower = false;\n        this.newPowerValue = 0;\n        this.newPowerBarValue = 0;\n        this.addPower = 0;\n        this.curValue = this.power.progress * 100;\n        this.curProgressValue = 0;\n    },\n\n    updateValue: function updateValue(value, barValue, addorLower) {\n        this.changePower = true;\n        this.newPowerValue = value;\n        this.newPowerBarValue = barValue;\n        this.curProgressValue = parseFloat(this.power.progress.toFixed(2));\n        this.addPower = this.newPowerBarValue >= this.curProgressValue ? 1 : -1;\n    },\n\n    animaBar: function animaBar() {\n        if (this.changePower) {\n            this.curProgressValue = parseFloat(this.power.progress.toFixed(2));\n            if (this.curProgressValue !== this.newPowerBarValue) {\n                this.power.progress += 0.01 * this.addPower;\n            }\n            if (this.curValue !== this.newPowerValue) {\n                this.curValue += 1 * this.addPower;\n                this.content.string = this.curValue;\n            }\n            if (this.curProgressValue == this.newPowerBarValue && this.curValue === this.newPowerValue) {\n                this.changePower = false;\n            }\n        }\n    },\n\n    update: function update(dt) {\n        this.animaBar();\n    }\n});\n\ncc._RFpop();\n},{}],\"Resources\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '52a728YXuFIjIT4uiKYa6dO', 'Resources');\n// scripts/controllers/Resources.js\n\n\nvar BattlePanel = require('BattlePanel');\nvar GameOverPanel = require('GameOverPanel');\n\nvar Skills = {\n    0: \"雨|\" + 5,\n    1: \"火|\" + 10,\n    2: \"肉|\" + 15,\n    3: \"健康|\" + 20,\n    4: \"阳光|\" + 25,\n    5: \"谷物|\" + 30,\n    6: \"矿藏|\" + 35,\n    7: \"武器|\" + 40,\n    8: \"燃料|\" + 45,\n    9: \"绿色植物|\" + 50\n};\n\nvar INIT_POWER = 20;\nvar MIN_POWER = 0;\nvar MAX_POWER = 100;\n\nvar Resources = cc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        curPower: {\n            'default': 0,\n            type: cc.Integer,\n            visible: false\n        },\n\n        gameOver: {\n            'default': null,\n            type: GameOverPanel\n        }\n    },\n\n    statics: {\n        instance: null\n    },\n\n    onLoad: function onLoad() {\n        Resources.instance = this;\n    },\n\n    start: function start() {\n        this.curPower = 0;\n        this.addPower(INIT_POWER);\n    },\n\n    // 增加能量\n    addPower: function addPower(value) {\n        this.curPower += value;\n        this.curPower = this.curPower >= MAX_POWER ? MAX_POWER : this.curPower;\n        BattlePanel.instance.power.updateValue(this.curPower, this.curPower / Resources.MAX_POWER);\n    },\n\n    // 减能量\n    spendPower: function spendPower(value) {\n        this.curPower -= value;\n        this.curPower = this.curPower <= MIN_POWER ? MIN_POWER : this.curPower;\n        BattlePanel.instance.power.updateValue(this.curPower, this.curPower / Resources.MAX_POWER);\n\n        this.scheduleOnce(function () {\n            if (this.curPower < 10) {\n                this.gameOver.node.active = true;\n            }\n        }, 5);\n    }\n});\n\nResources.MIN_POWER = MIN_POWER;\nResources.MAX_POWER = MAX_POWER;\nResources.Skills = Skills;\n\ncc._RFpop();\n},{\"BattlePanel\":\"BattlePanel\",\"GameOverPanel\":\"GameOverPanel\"}],\"SkillMng\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, 'ea87fcJKItLaqsfUPzHz3Xx', 'SkillMng');\n// scripts/controllers/SkillMng.js\n\ncc.Class({\n    \"extends\": cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {}\n\n});\n// called every frame, uncomment this function to activate update callback\n// update: function (dt) {\n\n// },\n\ncc._RFpop();\n},{}],\"Skill\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, 'b874brCF5xOxoY39iXDY0fK', 'Skill');\n// scripts/ui/Skill.js\n\ncc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        label: cc.Label,\n        sprite: cc.Sprite,\n        sfIcons: [cc.SpriteFrame],\n        skillID: {\n            'default': 0,\n            type: cc.Integer,\n            visible: false\n        },\n        cost: {\n            'default': 0,\n            type: cc.Integer,\n            visible: false\n        },\n        button: cc.Button,\n        cooldown: 0\n    },\n\n    userSkill: function userSkill() {\n        if (this.callback) {\n            this.callback.call(this.target, this.skillID, this.cost);\n            this.button.interactable = false;\n            this.scheduleOnce(this.onButtonCooldown.bind(this), this.cooldown);\n        }\n    },\n\n    onButtonCooldown: function onButtonCooldown() {\n        var Resources = require('Resources');\n        if (this.cost > Resources.instance.curPower) {\n            return;\n        }\n        this.button.interactable = true;\n    },\n\n    updateSkill: function updateSkill(skillInfo, callback, target) {\n        this.skillID = skillInfo.id;\n        this.cost = skillInfo.cost;\n        this.label.string = this.cost;\n        this.sprite.spriteFrame = this.sfIcons[this.skillID];\n        this.callback = callback;\n        this.target = target;\n    }\n});\n\ncc._RFpop();\n},{\"Resources\":\"Resources\"}],\"Society\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '07354aU81JPS5ESw2HLIjGo', 'Society');\n// scripts/controllers/Society.js\n\nrequire('../../ykl/global');\nvar Group = require('Group');\nvar Wish = require('../Wish');\nvar BattlePanel = require('BattlePanel');\nvar FXRitual = require('FXRitual');\nvar GameOverPanel = require('GameOverPanel');\nvar AssetMng = require('AssetMng');\nvar AudioMng = require('AudioMng');\nvar Narrative = require('Narrative');\n\nvar wishTypeList = cc.Enum.getList(WishType);\nvar Wishes = {};\nvar PopulationLevel = [3, 8, 20, 35, 50];\nvar Levels = {};\nfor (var i = 0; i < wishTypeList.length; ++i) {\n    var id = wishTypeList[i].value;\n    Wishes[id] = new Wish();\n    Wishes[id].id = id;\n    Levels[PopulationLevel[i]] = id;\n}\n\nfunction createRitual(pose, id) {\n    return {\n        id: id,\n        pose: pose,\n        count: 0,\n        level: 0\n    };\n}\n\nvar Society = cc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        // Unlearnt Wishes\n        wishes: {\n            'default': [],\n            type: [Wish]\n        },\n\n        // Root node to host all people\n        host: {\n            'default': null,\n            type: cc.Node\n        },\n\n        battlePanel: {\n            'default': null,\n            type: BattlePanel\n        },\n\n        fxRitual: {\n            'default': null,\n            type: FXRitual\n        },\n\n        gameOver: {\n            'default': null,\n            type: GameOverPanel\n        },\n\n        assetMng: {\n            'default': null,\n            type: AssetMng\n        },\n\n        narrative: Narrative,\n\n        // Decide when to ask\n        prayDelay: 20,\n\n        // Decide the possibility to lost people\n        lostCoef: 1,\n\n        prayCoef: 0.3,\n\n        // Decide when to learn, +- 1 floating\n        learnDelay: 10,\n\n        // Population\n        population: 0\n    },\n\n    pause: function pause() {\n        this._pause = true;\n        this.node.emit('pause');\n    },\n\n    resume: function resume() {\n        this._pause = false;\n        this.node.emit('resume');\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.rituals = {};\n        this.ritualCount = 0;\n        this.lastRitualID = 0;\n\n        this.firstWishPop = false;\n\n        this._pause = true;\n\n        this.god = this.getComponent('God');\n\n        // People who do nothing\n        this.defaultGroup = new Group(this);\n        // People who is learning the learningSkill\n        this.learningGroup = new Group(this);\n        // All running groups which is not in default state\n        this.runningGroups = [];\n\n        this.prayTimeout = this.prayDelay;\n        this.learnTimeout = this.learnDelay;\n\n        // AudioMng.instance.playBGM();\n\n        this.assetMng.init((function () {\n            for (var i = 0; i < wishTypeList.length; ++i) {\n                var id = wishTypeList[i].value;\n                var wishInfo = this.assetMng.wishesDB[id];\n                Wishes[id].poseCount = parseInt(wishInfo.poseCount);\n                Wishes[id].poseDuration = parseInt(wishInfo.poseDuration);\n                Wishes[id].moveSpeed = parseInt(wishInfo.moveSpeed);\n                Wishes[id].ritualNeed = parseInt(wishInfo.ritualNeed);\n                Wishes[id].tributePerP = parseInt(wishInfo.tributePerP);\n                Wishes[id].divineConsume = parseInt(wishInfo.divineConsume);\n                Wishes[id].wishConsume = parseInt(wishInfo.wishConsume);\n                Wishes[id].levelBonus = parseInt(wishInfo.levelBonus);\n                Wishes[id].attraction = parseInt(wishInfo.attraction);\n            }\n        }).bind(this));\n    },\n\n    wishCheck: function wishCheck(group, wishID) {\n        if (group.isLearning() && group.wish && group.wish.id === wishID) {\n            var i,\n                people = group.people,\n                poses = {},\n                behavior,\n                pose,\n                max = 1,\n                pickedPose;\n            for (i = 0; i < people.length; ++i) {\n                behavior = people[i].getComponent('HumanBehavior');\n                if (!behavior.checked) {\n                    continue;\n                }\n                pose = behavior.currentPose;\n                if (poses[pose]) {\n                    poses[pose]++;\n                    if (poses[pose] > max) {\n                        max = poses[pose];\n                        pickedPose = pose;\n                    }\n                } else {\n                    poses[pose] = 1;\n                }\n            }\n            // Ritual need satisfied\n            var wish = group.wish;\n            if (pickedPose && max >= wish.ritualNeed) {\n                this.scheduleOnce(function () {\n                    var poseID = Poses.indexOf(pickedPose);\n                    this.fxRitual.playAnim(poseID);\n                    // this.god.showWonder();\n                }, 2.5);\n                AudioMng.instance.playRitual();\n                this.ritualLearnt(wish, pickedPose);\n                this.tribute(max * wish.wishConsume, wish);\n                group.toState(States.WORSHIPING, pickedPose);\n            }\n        } else if (group.isPraying() && group.prayRitual === this.rituals[wishID].pose) {\n            this.tribute(group.people.length * Wishes[wishID].wishConsume, Wishes[wishID]);\n            group.toState(States.WORSHIPING);\n        } else if (group.wish) {\n            // Force update pose\n            group.punish();\n        }\n    },\n\n    skillFired: function skillFired(wishID) {\n        this.wishCheck(this.learningGroup, wishID);\n\n        for (var i = 0; i < this.runningGroups.length; ++i) {\n            var group = this.runningGroups[i];\n            this.wishCheck(group, wishID);\n        }\n    },\n\n    tribute: function tribute(resources, wish) {\n        this.god.tribute(resources);\n        var newbies = Math.round(wish.attraction + Math.random() * 2 - 1);\n        this.getComponent('generator').generate(newbies);\n        AudioMng.instance.playBaby();\n\n        // Upgrade rituals\n        var ritual = this.rituals[wish.id];\n        ritual.count++;\n        var lastLevel = ritual.level;\n        ritual.level = Math.floor(ritual.count / 3);\n        if (ritual.level > lastLevel) {\n            this.god.showWonder(ritual.id);\n        }\n    },\n\n    updatePopulation: function updatePopulation() {\n        this.battlePanel.people.string = this.population;\n        var max, count;\n        for (var i = 0; i < PopulationLevel.length; ++i) {\n            count = PopulationLevel[i];\n            if (this.population >= count && Levels[count]) {\n                max = count;\n                id = Levels[count];\n            } else if (this.population < count) {\n                break;\n            }\n        }\n        if (max) {\n            var unlocked = this.battlePanel.unlockBtn(Levels[max]);\n            unlocked && this.newSkillsAvailable(unlocked);\n        }\n    },\n\n    newSkillsAvailable: function newSkillsAvailable(skills) {\n        for (var i = 0; i < skills.length; ++i) {\n            var id = skills[i];\n            if (Wishes[id]) {\n                this.wishes.push(Wishes[id]);\n            }\n        }\n    },\n\n    startLearning: function startLearning() {\n        if (this.learningGroup.isLearning()) {\n            this.learningGroup.toState(States.LEARNING);\n        }\n    },\n\n    learn: function learn() {\n        if (this.firstWishPop === false) {\n            this.firstWishPop = true;\n            this.scheduleOnce(function () {\n                this.narrative.playLine(2);\n            }, 1);\n        }\n        for (var i = 0; i < this.wishes.length; ++i) {\n            var wish = this.wishes[i];\n            this.learningGroup.reuse(this);\n            var delay = 2 + Math.random() * 2;\n            var succeed = this.defaultGroup.split(wish, this.learningGroup);\n            if (succeed) {\n                this.learningGroup.wish = wish;\n                this.learningGroup.learning = true;\n                this.scheduleOnce(this.startLearning, delay);\n                break;\n            }\n        }\n    },\n\n    ritualLearnt: function ritualLearnt(wish, pose) {\n        this.rituals[wish.id] = createRitual(pose, this.lastRitualID);\n        this.lastRitualID++;\n        this.ritualCount = Object.keys(this.rituals).length;\n        this.prayTimeout = this.prayDelay;\n        var index = this.wishes.indexOf(wish);\n        if (index !== -1) {\n            this.wishes.splice(index, 1);\n        }\n        index = UnusedPoses.indexOf(pose);\n        if (index > -1) {\n            UnusedPoses.splice(index, 1);\n        }\n    },\n\n    rejointDefault: function rejointDefault(group) {\n        var defaultGroup = this.defaultGroup;\n        group.people.forEach(function (person) {\n            defaultGroup.addMember(person);\n        });\n        if (group === this.learningGroup) {\n            group.unuse();\n        } else {\n            var index = this.runningGroups.indexOf(group);\n            if (index >= 0) {\n                this.runningGroups.splice(index, 1);\n            }\n            cc.pool.putInPool(group);\n        }\n    },\n\n    lost: function lost(count) {\n        this.population -= count;\n        this.updatePopulation();\n        if (this.population < 3) {\n            this.gameOver.node.active = true;\n        }\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (this._pause) {\n            return;\n        }\n\n        // Learn new skill if possible\n        if (this.wishes.length > 0 && !this.learningGroup.learning) {\n            if (this.learnTimeout <= 0 || this.ritualCount === 0) {\n                this.learnTimeout = this.learnDelay;\n                this.learn();\n            }\n            this.learnTimeout -= dt;\n        }\n        if (this.learningGroup.active) {\n            this.learningGroup.update(dt);\n        }\n        // Pray with ritual\n        var group;\n        if (this.ritualCount > 0) {\n            // Ready for praying\n            if (this.prayTimeout <= 0) {\n                this.prayTimeout = this.prayDelay;\n                var knownWishes = Object.keys(this.rituals);\n                var wishID = knownWishes[Math.floor(Math.random() * knownWishes.length)];\n                var wish = Wishes[wishID];\n                group = cc.pool.hasObject(Group) ? cc.pool.getFromPool(Group) : new Group(this);\n                var succeed = this.defaultGroup.split(wish, group);\n                if (succeed) {\n                    group.wish = wish;\n                    group.praying = true;\n                    this.runningGroups.push(group);\n                    group.toState(States.PRAYING);\n                }\n            }\n            this.prayTimeout -= dt;\n        }\n\n        for (var i = 0; i < this.runningGroups.length; ++i) {\n            group = this.runningGroups[i];\n            if (group.active) {\n                group.update(dt);\n            }\n        }\n    }\n});\n\nSociety.Wishes = Wishes;\n\ncc._RFpop();\n},{\"../../ykl/global\":\"global\",\"../Wish\":\"Wish\",\"AssetMng\":\"AssetMng\",\"AudioMng\":\"AudioMng\",\"BattlePanel\":\"BattlePanel\",\"FXRitual\":\"FXRitual\",\"GameOverPanel\":\"GameOverPanel\",\"Group\":\"Group\",\"Narrative\":\"Narrative\"}],\"TouchStart\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '6dc38qFSeRN4ZJQf+mnMO8Q', 'TouchStart');\n// scripts/ui/TouchStart.js\n\ncc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        mask: cc.Node\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.node.runAction(cc.sequence(cc.fadeOut(1), cc.fadeIn(1)));\n        cc.eventManager.addListener({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            onTouchBegan: function onTouchBegan(touch, event) {\n                // don't capture the event\n                return true;\n            },\n            onTouchEnded: (function (touch, event) {\n                this.mask.runAction(cc.fadeIn(1));\n                cc.director.loadScene('game');\n            }).bind(this)\n        }, this);\n    }\n\n});\n// called every frame, uncomment this function to activate update callback\n// update: function (dt) {\n\n// },\n\ncc._RFpop();\n},{}],\"TriggerAnimEvent\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, 'd6b5bKEME1LdZrQDXO704qZ', 'TriggerAnimEvent');\n// scripts/utils/TriggerAnimEvent.js\n\ncc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        startBtnAnim: {\n            'default': null,\n            type: cc.Animation\n        }\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {},\n\n    eyesAnimEnd: function eyesAnimEnd() {\n        this.startBtnAnim.play('fadeInStartBtn');\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n\ncc._RFpop();\n},{}],\"Wish\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, 'cd80bMwggpJGrAca2Y6vLoB', 'Wish');\n// scripts/Wish.js\n\nvar Wish = cc.Class({\n    name: 'Wish',\n    properties: {\n        id: 0,\n        poseCount: 2,\n        poseDuration: 3,\n        moveSpeed: 50,\n        ritualNeed: 3,\n        tributePerP: 2,\n        divineConsume: 1,\n        wishConsume: 3,\n        levelBonus: 0.1,\n        attraction: 1\n    }\n});\n\nmodule.exports = Wish;\n\ncc._RFpop();\n},{}],\"generator\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '7d32f/FDHZEMY1WZNTt3Lps', 'generator');\n// scripts/levels/generator.js\n\ncc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        population: 3,\n\n        y: {\n            type: [cc.Integer],\n            'default': []\n        },\n\n        // Person prefab for generating people\n        person: {\n            'default': null,\n            type: cc.Prefab\n        }\n    },\n\n    // use this for initialization\n    start: function start() {\n        this.society = this.getComponent('Society');\n\n        if (!this.society._pause) {\n            this.generate(this.population);\n        } else {\n            this.society.node.on('resume', function () {\n                this.generate(this.population);\n            }, this);\n        }\n    },\n\n    generate: function generate(count) {\n        var society = this.society;\n        if (!society.host) {\n            return;\n        }\n        for (var i = 0; i < count; ++i) {\n            var newbie = cc.instantiate(this.person);\n            // Random between [50, width-100)\n            var w = cc.winSize.width;\n            newbie.x = w * 0.2 + Math.floor(Math.random() * w * 0.6) - 96;\n            newbie.y = this.y.length > 0 ? this.y[i % this.y.length] : 100;\n\n            if (this.y.length > 0) {\n                newbie.scale = 1.1 - i % this.y.length / this.y.length * 0.25;\n            }\n            newbie.scale += (Math.random() - 0.5) * 0.05;\n\n            var zIndex = cc.winSize.height - newbie.y;\n            newbie.opacity = 0;\n            newbie.runAction(cc.fadeIn(1));\n            society.host.addChild(newbie, zIndex);\n            society.defaultGroup.addMember(newbie);\n        }\n        society.population += count;\n        society.updatePopulation();\n    }\n});\n\ncc._RFpop();\n},{}],\"global\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, '796dclFGDdGeoH9i6fiyI+J', 'global');\n// ykl/global.js\n\n\nvar States = cc.Enum({\n    DEFAULT: 0,\n    LEARNING: 1,\n    DOUBTING: 2,\n    CONFIRMING: 3,\n    WORSHIPING: 4,\n    PRAYING: 5,\n    LOST: 6\n});\n\nvar WishType = cc.Enum({\n    Rain: -1,\n    Fire: -1,\n    Meat: -1,\n    Sun: -1,\n    Wheet: -1\n});\n\nvar Poses = ['p_act01', 'p_act02', 'p_act03', 'p_act04', 'p_act05', 'p_act06', 'p_act07', 'p_act08'];\n\nvar UnusedPoses = ['p_act01', 'p_act02', 'p_act03', 'p_act04', 'p_act05', 'p_act06', 'p_act07', 'p_act08'];\n\nwindow.States = States;\nwindow.Poses = Poses;\nwindow.UnusedPoses = UnusedPoses;\nwindow.WishType = WishType;\n\ncc._RFpop();\n},{}]},{},[\"Society\",\"FXRitual\",\"Narrative\",\"FXSign\",\"ButtonScaler\",\"Camera\",\"Group\",\"LookAt\",\"EffectMng\",\"Resources\",\"GameOverPanel\",\"PowerBar\",\"FXWonder\",\"TouchStart\",\"global\",\"generator\",\"MainPanel\",\"HumanManager\",\"God\",\"BattlePanel\",\"AssetMng\",\"Skill\",\"Wish\",\"TriggerAnimEvent\",\"AudioMng\",\"SkillMng\",\"HumanBehavior\",\"Credits\"]);\n"],"sourceRoot":"/source/"}